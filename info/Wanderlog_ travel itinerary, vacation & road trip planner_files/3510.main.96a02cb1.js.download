"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3510],{773510:function(e,t,n){n.d(t,{Hl:function(){return b},Jc:function(){return T},XH:function(){return O}});var r=n(364467),o=n(310467),i=n(956347),a=n(778291),u=n(738067),s=n(881631),c=n(709638),p=n(158956),l=n(516506),d=n(616041),g=n(724628),f=n(968483),m=n(243856),y=n(214649),h=n(532884),v=n(577180),P=n(752301);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=e.source,n=e.geos,r=e.showSignupModal,o=e.createOptions,i=b({source:t,geos:n,showSignupModal:r,doNotAttemptCreation:e.doNotAttemptCreation,openPlanInSameTab:e.openPlanInSameTab,planPageOverlay:e.planPageOverlay}),a=i.isCreatingTripPlan,u=i.onTripPlanCreate;return{isCreatingTripPlan:a,onTripPlanCreate:(0,f.D)((function(){return u(null!=o?o:{})}),[o,u])}}function b(e){var t,n=e.source,r=e.geos,u=e.showSignupModal,s=e.doNotAttemptCreation,c=e.openPlanInSameTab,p=e.planPageOverlay,g=(0,d.nc)(),m=g.user,y=g.showLoginModal,v=(0,i.W6)(),w=(0,a.Bd)().t,O=T({geoName:null===(t=r[0])||void 0===t?void 0:t.name,source:n,planPageOverlay:p}),b=(0,l.IR)(O),S=b.state,x=b.call,D=(0,f.D)(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(t){var o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A({showLoginModal:y,user:m,showSignupModal:u,t:w});case 2:if(!s){e.next=5;break}return N(),e.abrupt("return");case 5:if(!c){e.next=12;break}return e.next=8,x(J({geoIds:r.map((function(e){return e.id}))},t));case 8:"done"===(o=e.sent).status?c&&v.push(o.result.tripPlanPath):C(o.error),e.next=13;break;case 12:(0,h.e)((0,P.WA)(J({geoIds:r.map((function(e){return e.id})),geoName:null===(i=r[0])||void 0===i?void 0:i.name,planPageOverlay:p,source:n},t)));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[y,m,u,w,s,c,x,r,v,p,n]);return{isCreatingTripPlan:"inProgress"===(null==S?void 0:S.status),onTripPlanCreate:D}}function T(e){var t=e.geoName,n=e.source,r=e.planPageOverlay,i=(0,f.D)(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(o){var i,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.Tn)(J({geoIds:[],initialMapsPlaceIds:[],initialEmailId:null,type:m.J.plan,privacy:s.jO.friends,isMapEmbed:!1,title:null},o));case 2:return i=e.sent,a=i.key,(0,c.sx)(p.J.create,{type:m.J.plan,geoName:t,source:n}),l=(0,v.mC)({key:a,planPageOverlay:r,title:i.title}),e.abrupt("return",{tripPlanPath:l});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,r,n]);return i}function A(e){return S.apply(this,arguments)}function S(){return(S=(0,o.A)(regeneratorRuntime.mark((function e(t){var n,r,o,i,a,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.showLoginModal,r=t.user,o=t.showSignupModal,i=t.loginFormWhyText,a=t.t,r||!o){e.next=7;break}return u=n("register",{loginFormWhyText:null!=i?i:g.Hh[m.J.plan](a),showContinueButton:!0,continueButtonText:a("Skip and sign up later")}),s=u.success,l=u.continueWithoutLogin,s.then((function(){return(0,c.sx)(p.J.respondToCreatePostSignupPrompt,{signedUp:!0})})),l.then((function(){return(0,c.sx)(p.J.respondToCreatePostSignupPrompt,{signedUp:!1})})),e.next=7,Promise.race([s,l]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){(0,h.e)("/plan/create")}function C(e){(0,y.e)(new Error("Couldn't create trip plan from useCreateTripPlanWithStore: ".concat(e,". To stop logging this error, pass doNotAttemptCreation when calling useCreateTripPlanWithStore"))),N()}},724628:function(e,t,n){n.d(t,{Hh:function(){return u},aZ:function(){return s}});var r=n(241811),o=n(243856),i=n(419409),a=n(835674),u={[o.J.plan]:(0,r.A)((function(e){return{login:e("Log in to save your trip"),register:e("Sign up to save your trip")}})),[o.J.recommendations]:(0,r.A)((function(e){return{login:e("Log in to save your guide"),register:e("Sign up to save your guide")}})),[o.J.story]:(0,r.A)((function(e){return{login:e("Log in to save your trip story"),register:e("Sign up to save your trip story")}}))},s=(o.J.plan,(0,i.z)("trip",{translationNote:"Type of travel document focused on planning travel arrangements"}),o.J.recommendations,(0,i.z)("guide",{translationNote:"Written guide"}),o.J.story,(0,i.z)("trip story",{translationNote:"Type of trip document focused on journaling trip events"}),o.J.plan,(0,i.z)("Add to trip"),o.J.recommendations,(0,i.z)("Add to guide"),o.J.story,(0,i.z)("Add to trip story"),o.J.plan,(0,i.z)("trip plan",{translationNote:"A document detailing a travel plan"}),o.J.recommendations,(0,i.z)("guide",{translationNote:"Written guide"}),o.J.story,(0,i.z)("trip story",{translationNote:"Type of trip document focused on journaling trip events"}),{[o.J.plan]:(0,i.z)("Share your trip plan with friends"),[o.J.recommendations]:(0,i.z)("Share your guide with friends"),[o.J.story]:(0,i.z)("Share your trip story with friends")});o.J.plan,(0,i.z)("Trips",{translationNote:"For documents focused on planning travel arrangements, as opposed a guide to inform others",maxCharsPerLine:a.g}),o.J.recommendations,(0,i.z)("Guides",{translationNote:"Written guides",maxCharsPerLine:a.g}),o.J.story,(0,i.z)("Stories",{translationNote:"Multiple trip documents",maxCharsPerLine:a.g})},881631:function(e,t,n){n.d(t,{Vg:function(){return m},WF:function(){return r},f1:function(){return l},hx:function(){return y},jO:function(){return o},nf:function(){return p},oR:function(){return f},vx:function(){return d}});var r,o,i=n(89394),a=n(342781),u=n(308376),s=n(243856),c=n(735914);!function(e){e.editing="editing",e.suggesting="suggesting",e.viewing="viewing"}(r||(r={})),function(e){e.private="private",e.friends="friends",e.public="public"}(o||(o={}));var p,l={[s.J.plan]:o.friends,[s.J.recommendations]:o.public,[s.J.story]:o.friends};u.Aj.edit,r.editing,u.Aj.suggest,r.suggesting,u.Aj.view,r.viewing;function d(e){return e===p.verified||e===p.verifiedAndFeatured||e===p.proOnly}function g(e){var t=e.itinerary,n=e.startDate,r=e.endDate,o=t.sections.map((function(e){return e.date})),a=[n,r].concat((0,i.A)(o)).filter((function(e){return!!e})).sort();return{startDate:a[0]||null,endDate:a[a.length-1]||null}}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isShared:!1},r=e.id,o=e.userId,i=e.contributors,s=e.key,c=e.placeCount,p=e.type,l=g(e),d=l.startDate,f=l.endDate,m=new Date,y=d&&new Date("".concat(d,"T00:00:00Z")),h=f&&new Date("".concat(f,"T23:59:59Z")),v=864e5;return{id:r,key:s,type:p,keyType:(0,u.Gx)(s.length),daysUntilStart:y&&Math.ceil((m.getTime()-y.getTime())/v),daysSinceEnd:h&&Math.ceil((m.getTime()-h.getTime())/v),isCreator:o===t||!t&&o===a.LJ,isContributor:!!i.find((function(e){return e.id===t})),userId:o,loggedInUserId:t,placeCount:c,isShared:n.isShared}}function m(e){var t=e.type,n=e.geos,r=e.isMapEmbed,o=e.t;if(!n.length)switch(t){case s.J.plan:return o("My upcoming trip");case s.J.recommendations:return o("My top recommendations");case s.J.story:return"";default:throw(0,c.t)(t)}var i=n.map((function(e){return e.name}));switch(t){case s.J.plan:return i.length>2?o("Trip to {{geoName1}}, {{geoName2}}, and more",{geoName1:i[0],geoName2:i[1]}):o("Trip to {{geoNames, list}}",{geoNames:i});case s.J.recommendations:return o(r?"{{geoNames, list}} Map":"{{geoNames, list}} Guide",{geoNames:i});case s.J.story:return"";default:throw(0,c.t)(t)}}function y(e){var t=e.type,n=e.key;switch(t){case s.J.recommendations:case s.J.story:return(0,u.Gx)(n.length)===u.Aj.view;case s.J.plan:return!1;default:return(0,c.t)(t),!1}}!function(e){e.promotable="promotable",e.verified="verified",e.verifiedAndFeatured="featured",e.hidden="hidden",e.proOnly="pro-only"}(p||(p={}))},835674:function(e,t,n){n.d(t,{g:function(){return r}});var r=n(939110).h},939110:function(e,t,n){n.d(t,{h:function(){return r}});var r=n(822227).Px}}]);