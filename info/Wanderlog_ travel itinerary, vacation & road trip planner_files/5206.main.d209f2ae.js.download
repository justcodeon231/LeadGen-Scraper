"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5206],{945006:function(e,t,n){var r=n(58168),o=n(3453),a=n(296540),c=n(290667),i=n(281717);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=a.memo((function(e){var t,n=e.text,u=e.highlights,s=e.highlightClassName,p=e.onHighlightClick,d=(0,c.y)(p||null),f=[],m=l((0,a.useMemo)((function(){return(0,i.A)(n,u)}),[n,u]).entries());try{for(m.s();!(t=m.n()).done;){var g=(0,o.A)(t.value,2),h=g[0],v=g[1];v.isHighlight?f.push(a.createElement("span",(0,r.A)({},d?{role:"button",tabIndex:-1,onClick:d(v.text)}:{},{className:s||"font-weight-bold",key:h}),v.text)):f.push(a.createElement("span",{key:h},v.text))}}catch(e){m.e(e)}finally{m.f()}return a.createElement(a.Fragment,null,f)}));t.A=s},991683:function(e,t,n){n.d(t,{A:function(){return f}});var r=n(58168),o=n(310467),a=n(3453),c=n(296540),i=n(135010),l=n(646860),u=n(962393),s=n(389225),p=n(904640),d=(0,l.U9)();function f(e){var t=c.memo((function(t){var n=t.forwardedRef,i=(0,c.useState)(g),l=(0,a.A)(i,2),u=l[0],p=l[1];return(0,c.useEffect)((function(){var e=function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:p(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,s.o6)()||u?c.createElement(e,(0,r.A)({ref:n},t)):c.createElement("div",null)}));return(0,u.c)({HOC:t,OriginalComponent:e})}var m=null,g=!1;function h(){return v.apply(this,arguments)}function v(){return(v=(0,o.A)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m||(m=y()),e.abrupt("return",m);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return b.apply(this,arguments)}function b(){return(b=(0,o.A)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new i.a({apiKey:d,version:"quarterly",libraries:["geometry","drawing","places"],url:(0,p.e)()?"http://maps.google.cn/maps/api/js":void 0}),e.next=3,t.load();case 3:g=!0;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},499698:function(e,t,n){var r=n(58168),o=n(180045),a=n(23029),c=n(92901),i=n(885501),l=n(56822),u=n(353954),s=n(778291),p=n(296540),d=n(32485),f=n.n(d),m=n(349107),g=n(651954),h=n(883499),v=(n(295272),["t","onClick","className","buttonClassName"]);function y(e){var t=b();return function(){var n,r=(0,u.A)(e);if(t){var o=(0,u.A)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.A)(this,n)}}function b(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(b=function(){return!!e})()}var S=function(e){(0,i.A)(n,e);var t=y(n);function n(){return(0,a.A)(this,n),t.apply(this,arguments)}return(0,c.A)(n,[{key:"render",value:function(){var e=this.props,t=e.t,n=e.onClick,a=e.className,c=(e.buttonClassName,(0,o.A)(e,v));return p.createElement("div",(0,r.A)({className:f()("ModalBodyBackButton__container",a)},c),p.createElement(g.Ay,{faIcon:m.Wz,onClick:n,color:"flat",size:h.M.mdLg,screenReaderLabel:t("Close",{translationNote:"Close a window or pop-up"}),className:"ModalBodyBackButton__button align-items-center justify-content-center",clickEvent:null}))}}]),n}(p.PureComponent);S.displayName="ModalBodyBackButton",t.A=(0,s.CI)()(S)},949249:function(e,t,n){var r=n(296540),o=n(622296),a=(n(758697),n(899511)),c=n(968483),i=r.memo((function(e){var t=e.title,n=e.onDismiss,i=e.dismissEvent,l=e.className,u=e.dismissOnOutsideClick,s=e.children,p=(0,r.useRef)(null),d=(0,c.D)((function(){u&&n&&n()}),[u,n]);return(0,a.g)(p,d),r.createElement("div",{ref:p,className:"d-flex flex-column PopoverInner ".concat(l||"")},r.createElement("div",{className:"d-flex justify-content-between align-items-center pl-3 pr-2 py-2"},r.createElement("span",{className:"font-weight-bold mr-4"},t),n&&r.createElement(o.A,{onClick:n,clickEvent:i})),r.createElement("div",{className:"PopoverInner__body px-3"},s))}));t.A=i},22807:function(e,t,n){var r=n(58168),o=n(180045),a=n(296540),c=n(916756),i=n(493810),l=["openTooltipRef"];function u(e){var t=e.openTooltipRef,n=(0,o.A)(e,l);return a.createElement(i.A,(0,r.A)({},n,{ref:t,name:"SessionFeatureTooltip",onDismiss:null}))}u.displayName="SessionFeatureTooltip",u=(0,c.PA)(u),t.A=u},444211:function(e,t,n){var r=n(364467),o=n(58168),a=n(3453),c=n(296540),i=n(32485),l=n.n(i),u=n(881617),s=n(654332),p=n(520673),d=n(249922),f=n(184157),m=n(883499),g=(n(222155),n(980602)),h=n(865619),v=n(968483),y=n(741767),b=n(997282),S=n(723340);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=c.memo((function(e){var t=e.label,n=e.clickAction,r=e.loading,i=e.loadingText,p=e.icon,A=e.selectedIcon,O=e.onEnterFreeformOption,E=e.freeformOption,w=e.options,x=e.positionFixed,I=e.isMenuOpen,M=e.onIsMenuOpenChange,C=e.menuOpenEvent,_=e.menuOpenEventProperties,N=e.closeMenuOnItemClick,T=e.size||m.M.md,j=e.color||"dark",D=(0,h.eY)(I,M),L=(0,c.useState)(!1),R=(0,a.A)(L,2),B=R[0],F=R[1],G=(0,c.useRef)(null),z=(0,c.useMemo)((function(){return w.some((function(e){return e.selected}))}),[w]),H=r||i,W=(0,c.useMemo)((function(){return H?c.createElement(d.A,{size:"xs"}):z?A&&c.createElement(s.A,{icon:A}):p&&c.createElement(s.A,{icon:p})}),[z,p,A,H]),K=(0,c.useMemo)((function(){return c.createElement("div",{className:"d-flex align-items-center"},W&&c.createElement("span",{className:"mr-2"},W),t)}),[W,t]),J=(0,v.D)((function(){F(!0),setTimeout((function(){G.current&&G.current.focus()}),0)}),[]),Y=(0,v.D)((function(e){if("Enter"===e.key){if(e.preventDefault(),G.current){G.current.blur();var t=G.current.value;t&&O&&O(t)}M(!1),F(!1)}}),[O,M]),U=(0,c.useMemo)((function(){return E?c.createElement("div",{className:"SplitDropdown__freeformContainer d-flex align-items-center position-relative flex-grow-1"},E.icon&&c.createElement(s.A,(0,o.A)({icon:E.icon,fixedWidth:!0,className:"mr-2",color:g.Nd},E.iconProps)),B?c.createElement(f.A,{innerRef:G,className:"SplitDropdown__freeformInput",placeholder:E.label,onKeyPress:Y}):c.createElement("span",{className:"mr-5"},E.label)):null}),[B,E,Y]),q=(0,c.useCallback)((function(e){return c.createElement("div",{className:"d-flex align-items-center position-relative flex-grow-1"},e.icon&&c.createElement(s.A,(0,o.A)({icon:e.icon,fixedWidth:!0,className:"mr-2"},e.iconProps)),c.createElement("div",{className:"SplitDropdown__optionLabel text-ellipsis mr-5"},e.label,e.sublabel&&c.createElement("div",{className:"small text-muted text-ellipsis"},e.sublabel)),e.rightLabel&&c.createElement("span",{className:"SplitDropdown__optionLabel text-ellipsis pl-2 ml-auto text-muted"},e.rightLabel),e.selected&&c.createElement(s.A,{icon:u.e6,size:"sm",className:"SplitDropdown__check"}))}),[]),X=(0,c.useCallback)((function(){return c.createElement(c.Fragment,null,w.map((function(e,t){var n,r,a,i;return c.createElement(S.A,(0,o.A)({key:null!==(n=e.key)&&void 0!==n?n:t,className:l()("SplitDropdown__option px-3",{SplitDropdown__defaultOption:"gray"===e.background}),toggle:N},(r=e.action,a=r.event,i=r.eventProperties,"onClick"in r?{onClick:r.onClick,clickEvent:a,eventProperties:i}:{href:r.href,target:r.target,tag:"a",clickEvent:a,eventProperties:i})),q(e))})),i&&c.createElement("div",{className:"SplitDropdown__loadingText text-muted d-flex align-items-center pointer-events-none"},c.createElement(d.A,{size:"xs",className:"mr-2"}),c.createElement("div",null,i)),E&&c.createElement(S.A,{className:l()("SplitDropdown__freeformOption px-3",{SplitDropdown__defaultOption:"gray"===E.background}),onClick:J,clickEvent:null,toggle:!1},U))}),[N,E,J,i,w,q,U]),$=(0,c.useCallback)((function(){return c.createElement(y.A,(0,o.A)({color:j,label:K,className:l()({"pl-2":H}),unroundSides:"right"},function(e){if(!e)return{onClick:void 0,clickEvent:null};var t=e.event,n=e.eventProperties,r={clickEvent:t,eventProperties:n};if("onClick"in e)return k(k({},r),{},{onClick:e.onClick});var o=e.href,a=e.target;return k(k({},r),{},{to:o,target:a})}(n),{size:T,onCaretClick:D,caretClickEvent:C||null,caretClickEventProperties:_,stopPropagation:!0}))}),[n,j,C,_,H,T,K,D]),V=(0,c.useMemo)((function(){return{modifiers:P,positionFixed:x,container:"body",flip:!0}}),[x]);return w.length||E?c.createElement(b.A,{direction:"down",isOpen:I,onIsOpenChange:M,className:"SplitDropdown__".concat(T," d-inline-block"),renderDropdownMenuInner:X,renderToggleButton:$,dropdownMenuProps:V,showAsBottomSheetOnMobile:!E}):null})),P=k(k({},p.f),{},{preventOverflow:{boundariesElement:"viewport"}});t.A=O},430459:function(e,t,n){var r=n(58168),o=n(364467),a=n(3453),c=n(180045),i=n(296540),l=n(865619),u=n(290667),s=n(444211),p=["defaultValue","onToggleSelected","options","lightGrayIfSelected"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t,n=e.defaultValue,o=e.onToggleSelected,d=e.options,m=e.lightGrayIfSelected,g=(0,c.A)(e,p),h=(0,i.useState)(!1),v=(0,a.A)(h,2),y=v[0],b=v[1],S=(0,l.eY)(y,b),A=(0,u.j)(o),k=null!==n?n:d.length>0?d[0].value:null,O=d.filter((function(e){return e.selected}));t=O.length>1||1===O.length&&O[0].value!==k?S:A(k);var P=(0,i.useMemo)((function(){return d.map((function(e){return f(f({},e),{},{action:{onClick:A(e.value),event:null}})}))}),[A,d]);return i.createElement(s.A,(0,r.A)({},g,{clickAction:(0,i.useMemo)((function(){return t?{onClick:t,event:null}:null}),[t]),options:P,isMenuOpen:y,onIsMenuOpenChange:b,color:O.length>=1&&m?"light-gray":e.color}))};m.displayName="SplitDropdownSelect",m=i.memo(m),t.A=m},976627:function(e,t,n){var r=n(778291),o=n(296540),a=n(350950),c=n(916756),i=n(22807),l=n(158956),u=n(881694),s=n(70739),p=n(267943),d=n(968483),f=(0,c.PA)((function(e){var t=(0,r.Bd)().t,n=e.canOpenTooltip,c=e.onClick,s=(0,o.useRef)(null),f=(0,u.Be)(),g=f.data,h=f.setValue;(0,o.useEffect)((function(){var e;n&&!g.dismissedLodgingWebTooltip&&(null==s||null===(e=s.current)||void 0===e||e.maybeShow())}),[s,n,g.dismissedLodgingWebTooltip]);var v=(0,d.D)((function(){var e;null==s||null===(e=s.current)||void 0===e||e.onDismiss(),h("dismissedLodgingWebTooltip",!0),c()}),[s,h,c]);return o.createElement(i.A,{fade:!0,heading:t("Find hotels",{translationNote:"For finding accommodations to book"}),body:t("Browse and book hotels near the places you want to visit"),positionFixed:!0,openTooltipRef:s},o.createElement("div",null,o.createElement(p.A,{faIcon:a.T4,iconSize:"1x",onClick:v,clickEvent:l.J.clickFindHotelsNonPromo,eventProperties:m,screenReaderLabel:t("Click find hotels",{translationNote:"To click on the button for finding hotels"})})))})),m={source:s.jV.mapButton};t.A=f},514942:function(e,t,n){var r,o=n(58168),a=n(310467),c=n(23029),i=n(92901),l=n(885501),u=n(56822),s=n(353954),p=n(778291),d=n(296540),f=n(916756),m=n(738067),g=n(882222),h=n(786620),v=n(616041),y=n(357272),b=n(674085);function S(e){var t=A();return function(){var n,r=(0,s.A)(e);if(t){var o=(0,s.A)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.A)(this,n)}}function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}var k=(0,f.PA)(r=function(e){(0,l.A)(r,e);var t,n=S(r);function r(){var e;(0,c.A)(this,r);for(var t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))).state={loading:!0,error:null,googlePlaceListId:null,showGoogleMaps:!1,showLoginOrSubscribeModal:!1},e.handleOpenInGoogleMaps=function(){var t=e.props,n=t.auth,r=t.toggle;e.setState({showLoginOrSubscribeModal:!0});var o=n.maybeShowLoginOrSubscribeModal({openedFrom:"GoogleMapsExportModal",firstFeatureName:y.Nu.exportToGoogleMaps}),a=o.success,c=o.failure;a.then((function(){setTimeout((function(){e.setState({showGoogleMaps:!0,showLoginOrSubscribeModal:!1})}),300)})),c.then((function(){setTimeout((function(){e.setState({showLoginOrSubscribeModal:!1}),r()}),300)}))},e.handleBack=function(){e.setState({showGoogleMaps:!1})},e}return(0,i.A)(r,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.loadData()}},{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen&&this.loadData()}},{key:"loadData",value:(t=(0,a.A)(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.t,r=t.tripPlanKey,this.setState({loading:!0,error:null}),e.prev=2,e.next=5,(0,m.Cu)(r);case 5:return o=e.sent,e.next=8,(0,b.c)(5e3);case 8:this.setState({loading:!1,googlePlaceListId:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),(0,g.WP)(this,n,"error","loading")(e.t0);case 14:case"end":return e.stop()}}),e,this,[[2,11]])}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.isOpen,t=this.state.showLoginOrSubscribeModal;return d.createElement(h.A,(0,o.A)({},this.props,this.state,{onOpenInGoogleMaps:this.handleOpenInGoogleMaps,isOpen:e&&!t,onBack:this.handleBack}))}}]),r}(d.PureComponent))||r;k.displayName="GoogleMapsExportModal",t.A=(0,p.CI)()((0,v.or)(k))},786620:function(e,t,n){var r=n(778291),o=n(296540),a=n(846874),c=n(402404),i=n(32485),l=n.n(i),u=n(395748),s=n(646860),p=n(56894),d=n(538672),f=n(342781),m=n(762299),g=n(158956),h=n(288087),v=n(421975),y=n(651954),b=n(499698),S=n(636890),A=n(577180),k=n(883499),O=(n(396883),o.memo((function(e){var t=(0,r.Bd)().t,n=e.isOpen,i=e.loading,O=e.googlePlaceListId,P=e.error,E=e.tripPlanKey,w=e.showGoogleMaps,x=e.onOpenInGoogleMaps,I=e.onBack,M=e.toggle;return o.createElement(m.Ay,{isOpen:n,onDismiss:M,size:w?"md":"sm",isAutomaticallyTriggered:!1,mobilePositionMode:"withMargins"},o.createElement(a.A,{className:"pt-2 px-0"},o.createElement(v.A,{onClick:M}),w&&o.createElement(b.A,{onClick:I}),o.createElement("div",{className:"GoogleMapsExportModalInner__heading m-4"},o.createElement("div",{className:"text-center"},(0,s.lb)(t))),o.createElement("div",{className:"GoogleMapsExportModalInner__body"},o.createElement(c.A,{isOpen:!w},o.createElement("div",{className:"text-center"},o.createElement("div",{className:"d-none d-sm-flex justify-content-center"},o.createElement(h.A,{className:"mr-2",type:h.j.ios,clickEvent:g.J.getIosAppExportModal}),o.createElement(h.A,{type:h.j.android,clickEvent:g.J.getAndroidAppExportModal})),o.createElement(d.A,{className:"btn btn-lg btn-primary btn-block d-flex d-sm-none align-items-center",path:(0,A.mC)({key:E,title:"",includeHost:!1}),clickEvent:g.J.openInAppLink},o.createElement(p.A,{src:"/assets/logo.png",alt:"",className:"btn-image"}),o.createElement("div",{className:"flex-grow-1 ml-3"},t("Open in the {{siteName}} app",{siteName:f.pu}))),o.createElement("div",{className:"mt-2 text-muted"},t("See your full document with your notes, reservations, and places on a map")),o.createElement("hr",{className:"my-4"}),o.createElement(S.A,{label:t("Open in Google Maps"),imageIconSrc:"/assets/GoogleMapsLogo_32x32.png",onClick:x,clickEvent:g.J.openInGoogleMaps,layout:"block",size:k.M.lg,color:"gray"}),o.createElement("div",{className:"mt-2 text-muted"},t("View only your saved places as markers on a map"))))),o.createElement(c.A,{isOpen:w},o.createElement("div",{className:"px-4"},o.createElement("p",null,o.createElement(r.x6,null,"In Google Maps,"," ",o.createElement("strong",{className:"text-info"},'click the "Follow" button')," ","to save the list")),o.createElement("div",{className:"text-center mb-4"},o.createElement(p.A,{src:"/assets/GoogleMapsExportModal__howTo.png",alt:t("Click the Follow button"),className:"GoogleMapsExportModalInner__howTo"})),o.createElement("div",{className:"text-center"},o.createElement(c.A,{isOpen:i},o.createElement("div",{className:"mb-4"},t("We're exporting your places to Google Maps")),o.createElement(u.A,{seconds:5,done:!i})),o.createElement(c.A,{isOpen:!i},o.createElement(y.Ay,{className:"btn btn-lg btn-primary",target:"_blank",label:t("Open in Google Maps"),imageIconSrc:"/assets/GoogleMapsLogo_32x32.png",color:"primary",size:k.M.lg,to:O&&w?(0,s.mZ)(O):void 0,clickEvent:null})),o.createElement("div",{className:l()("pt-4",{"text-danger":P})},P?(0,s.mW)(t):(0,s.EN)(t)))))))})));t.A=O},559889:function(e,t,n){var r=n(89394),o=n(778291),a=n(296540),c=n(31226),i=n(498373),l=n(641800),u=n(908269),s=n(1773),p=n(968483),d=n(290667),f=n(846596),m=n(158956),g=a.memo((function(e){var t=(0,o.Bd)().t,n=e.sections,c=e.checkedSectionIds,g=e.onCheckedSectionIdsChange,v=e.onExpand,y=(0,u.t$)(n,l.mc,(0,s.Mt)()),b=(0,p.D)((function(e,t){g(t?[].concat((0,r.A)(c),[e]):c.filter((function(t){return t!==e})))}),[c,g]),S=(0,d.j)(b),A=(0,a.useMemo)((function(){return{type:"button",onClick:v,clickEvent:m.J.expandMapLayers}}),[v]);return a.createElement(a.Fragment,null,y.slice(0,2).map((function(e){return a.createElement(i.A,{key:e.id,section:e,isChecked:c.includes(e.id),onIsCheckedChange:S(e.id)})})),y.length>2&&a.createElement(f.A,{iconProps:h,text:t("Expand for more"),action:A}))})),h={icon:c.Jt,size:"1x"};t.A=g},752994:function(e,t,n){var r=n(778291),o=n(296540),a=n(846925),c=n(158956),i=(n(960362),n(267943)),l=o.memo((function(e){var t=(0,r.Bd)().t,n=e.onClick,l=e.indicatorCount;return o.createElement("div",{className:"position-relative"},null!=l&&o.createElement("div",{className:"MapLayersButton__indicatorContainer d-flex justify-content-center align-items-center"},o.createElement("span",{className:"MapLayersButton__indicator font-weight-bold"},l)),o.createElement(i.A,{faIcon:a.qI,iconSize:"lg",onClick:n,clickEvent:c.J.openMapLayers,screenReaderLabel:t("Open map layers",{translationNote:"To open and view the map layers"})}))}));t.A=l},434378:function(e,t,n){var r=n(89394),o=n(778291),a=n(296540),c=n(997796),i=n(651954),l=n(641800),u=n(158956),s=n(575664),p=n(290667),d=n(908269),f=n(1773),m=n(968483),g=(n(456670),n(498373)),h=n(239652),v=a.memo((function(e){var t=(0,o.Bd)().t,n=e.sections,v=e.checkedSectionIds,y=e.onCheckedSectionIdsChange,b=e.alwaysShowRouteLines,S=e.onAlwaysShowRouteLinesToggle,A=(0,f.Mt)(),k=(0,a.useMemo)((function(){return(0,d.Go)({sections:n,allowedSectionTypes:l.mc,tripPlanType:A,filterEmptySections:!0})}),[n,A]),O=(0,m.D)((function(){return y((0,l.aT)(n))}),[n,y]),P=(0,m.D)((function(){return y([])}),[y]),E=(0,m.D)((function(e){var t=v.includes(e);y(t?v.filter((function(t){return t!==e})):[].concat((0,r.A)(v),[e]))}),[v,y]),w=(0,p.j)(E);return a.createElement(a.Fragment,null,a.createElement("div",{className:"d-flex align-items-center my-0"},a.createElement(i.Ay,{label:t("Select all",{translationNote:"Select all options at once"}),layout:"inline",color:"flat-primary",className:"MapLayersList__buttonText font-weight-bold pl-0 pr-2 py-1",onClick:O,clickEvent:u.J.selectAllSections,disabled:v.length===n.length}),a.createElement("span",{className:"MapLayersList__separator"},"•"),a.createElement(i.Ay,{label:t("Deselect all",{translationNote:"Clear selected options"}),layout:"inline",color:"flat-primary",className:"MapLayersList__buttonText font-weight-bold pl-2 pr-0 py-1",onClick:P,clickEvent:u.J.deselectAllSections,disabled:0===v.length})),k.map((function(e){var n=e.tripPlanHeadingType,r=e.sections;return r.length>0&&a.createElement("div",{key:n},a.createElement("hr",{className:"MapLayersList__horizontalLine mt-0 w-100 mb-3"}),a.createElement("div",{className:"d-flex justify-content-between align-items-center"},a.createElement("span",{className:"MapLayersList__heading font-weight-bold"},s.qV[n](t)),n===s.Xt.itinerary&&S&&a.createElement(h.A,{directions:"vertical"},a.createElement(i.Ay,{faIcon:c.TB,faIconProps:{size:void 0},label:t(b?"Hide route lines":"Always show route lines"),layout:"inline",color:"flat-primary",className:"MapLayersList__buttonText font-weight-bold px-0 ml-3",labelTextClassName:"ml-1",onClick:S,clickEvent:u.J.toggleMapRouteLines}))),r.map((function(e){return a.createElement(g.A,{key:e.id,section:e,isChecked:v.includes(e.id),onIsCheckedChange:w(e.id)})})))})))}));t.A=v},846596:function(e,t,n){var r=n(58168),o=n(296540),a=n(654332),c=n(445157),i=(n(784226),n(228825)),l=n(968483),u=o.memo((function(e){var t=e.iconProps,n=e.text,u=e.action,s=(0,l.D)((function(){"checkbox"===u.type?u.checkbox.onChange(!u.checkbox.checked):u.onClick()}),[u]);return o.createElement(i.A,{className:"MapLayersListRow d-flex justify-content-between align-items-center",onClick:s,clickEvent:"button"===u.type?u.clickEvent:null},o.createElement("div",{className:"d-flex align-items-center minw-0"},o.createElement("div",{className:"MapLayersListRow__icon"},o.createElement(a.A,(0,r.A)({size:"lg"},t))),o.createElement("div",{className:"ml-2 text-truncate"},n)),"checkbox"===u.type&&o.createElement(c.A,(0,r.A)({className:"ml-2",size:"lg"},u.checkbox)))}));t.A=u},498373:function(e,t,n){var r=n(296540),o=n(912298),a=n(778291),c=n(234356),i=n(274522),l=n(846596),u=r.memo((function(e){var t=(0,a.Bd)().t,n=e.section,u=e.isChecked,s=e.onIsCheckedChange,p=(0,i.AE)().datePreference;return r.createElement(l.A,{iconProps:(0,r.useMemo)((function(){return{icon:o.Pc,color:n.placeMarkerColor}}),[n.placeMarkerColor]),text:(0,c.km)(n,{dateFormat:c.iN.shortNumericMonth,datePreference:p,fillUntitled:!0,preferShorterNavigationLabel:!0,t}),action:(0,r.useMemo)((function(){return{type:"checkbox",checkbox:{checked:u,onChange:s}}}),[u,s])})}));t.A=u},125140:function(e,t,n){n.d(t,{u:function(){return r}});var r,o=n(58168),a=n(180045),c=n(778291),i=n(296540),l=n(304600),u=n(158956),s=n(949249),p=n(760304),d=(n(713598),n(434378)),f=n(559889),m=n(865619),g=["title","mode","onModeChange"];!function(e){e.hidden="hidden",e.compact="compact",e.large="large"}(r||(r={}));var h=i.memo((function(e){var t=(0,c.Bd)().t,n=e.title,h=e.mode,v=e.onModeChange,y=(0,a.A)(e,g),b=(0,m.xI)(v,r.large);return i.createElement(l.A,{in:h!==r.hidden},i.createElement(s.A,{title:n||t("Map layers",{translationNote:"Different data sets displayed on a map"}),onDismiss:(0,m.xI)(v,r.hidden),dismissEvent:u.J.closeMapLayers,dismissOnOutsideClick:!0,className:"MapLayersOverlay shadow-24"},h===r.compact?i.createElement(f.A,(0,o.A)({onExpand:b},y)):i.createElement(d.A,y),h!==r.hidden&&i.createElement(p.A,null)))}));t.A=h},84523:function(e,t,n){n.d(t,{I:function(){return u}});var r=n(3453),o=n(296540),a=n(968483),c=n(418062),i=n(641800),l=n(472272);function u(e,t){var n,u=(0,l.W)(t),s=u.tripPlanSettings,p=u.setTripPlanSettings,d=(0,o.useState)([]),f=(0,r.A)(d,2),m=f[0],g=f[1];return function(e,t){var n=t.hiddenSectionIds,r=t.setHiddenSectionIds,l=(0,c.mv)((function(){return(0,i.DH)(e,n)}),[n,e]),u=(0,o.useMemo)((function(){return(0,i.Jm)(e,n)}),[n,e]),s=(0,a.D)((function(t){r((0,i.O$)(e,t))}),[e,r]);return{hiddenSectionIds:n,checkedSectionIds:l,indicatorCount:u,onCheckedSectionIdsChange:s}}(e,{hiddenSectionIds:null!==(n=s.hiddenOverlaySectionIds)&&void 0!==n?n:m,setHiddenSectionIds:(0,a.D)((function(e){t?p({hiddenOverlaySectionIds:e}):g(e)}),[p,t])})}},267943:function(e,t,n){var r=n(296540),o=n(883499),a=n(651954),c=r.memo((function(e){var t=e.faIcon,n=e.iconSize,c=e.onClick,i=e.clickEvent,l=e.eventProperties,u=e.screenReaderLabel,s=(0,r.useMemo)((function(){return{size:n}}),[n]);return r.createElement(a.Ay,{color:"translucent-black",faIcon:t,faIconProps:s,size:o.M.mdLg,shadow:!0,layout:"inline",onClick:c,clickEvent:i,eventProperties:l,screenReaderLabel:u})}));t.A=c},304886:function(e,t,n){var r=n(778291),o=n(296540),a=n(261145),c=n(32485),i=n.n(c),l=n(991141),u=n(267943),s=n(158956),p=n(287440),d=(n(452681),n(968483)),f=n(212518),m=o.memo((function(e){var t=(0,r.Bd)().t,n=e.onPlaceSearch,c=e.onPlaceSelect,m=e.placeIds,g=e.idSuffix,h=e.focused,v=e.onFocusedChange,y=(0,o.useRef)(null),b=(0,o.useMemo)((function(){return{onBlur:function(){return v(!1)},className:"MapSearchButtonOrAutocomplete__placeAutosuggest shadow-24",placeholder:t("Search for a place",{translationNote:"Look for a location on map"})}}),[t,v]),S=(0,d.D)((function(){var e;v(!0),null===(e=y.current)||void 0===e||e.focus()}),[v]),A=(0,f.p)(t);return o.createElement(o.Fragment,null,o.createElement("div",{className:i()("MapSearchButtonOrAutocomplete__placeAutosuggestContainer",{"d-none":!h})},o.createElement(l.A,{ref:y,idSuffix:g,markerIcon:a.Mj,placeIds:m,onPlaceSelect:c,onPlaceSearch:n,prioritizeSearch:!0,blurBehavior:p.Wb.retain,inputProps:b,muteIcon:!1,defaultSuggestions:A,searchedFromSectionId:null})),o.createElement("div",{className:i()({"d-none":h})},o.createElement(u.A,{faIcon:a.Mj,iconSize:"1x",onClick:S,clickEvent:s.J.focusMapSearch,screenReaderLabel:t("Focus map search",{translationNote:"To focus on the map search button to bring up the map search bar"})})))}));t.A=m},535206:function(e,t,n){var r=n(58168),o=n(364467),a=n(3453),c=n(180045),i=n(778291),l=n(296540),u=n(795093),s=n.n(u),p=n(554918),d=n(20987),f=n(234356),m=n(330036),g=n(163959),h=n(334762),v=n(281220),y=n(824659),b=n(206482),S=n(661393),A=(n(167193),n(274522)),k=n(290667),O=n(418062),P=n(968483),E=n(227418),w=n(804855),x=n(970233),I=n(803973),M=n(781459),C=n(752760),_=n(476098),N=n(865619),T=n(501047),j=n(651954),D=["placeSections","defaultBoundsGeo","selectedBlock","placeMetadata","showOnlySectionId","onShowOnlySectionIdChange","onPlacesListClick","selectedPlaceDisplayMode","saveButton","addMarginToOverlays","searchMapRef","componentsToHide","onBoundsChanged"];function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G=l.createElement("div",{className:"PlanMapInnerSidebar__mapElement"}),z=l.memo((function(e){var t=(0,i.Bd)().t,n=e.placeSections,o=e.defaultBoundsGeo,u=e.selectedBlock,L=e.placeMetadata,F=e.showOnlySectionId,z=e.onShowOnlySectionIdChange,K=e.onPlacesListClick,J=e.selectedPlaceDisplayMode,Y=e.saveButton,U=e.addMarginToOverlays,q=e.searchMapRef,X=e.componentsToHide,$=e.onBoundsChanged,V=(0,c.A)(e,D),Z=e.selectedItem,Q=e.onSelectedItemChange,ee=e.overlays,te=e.edgeInsets,ne=(0,A.AE)(),re=(0,x.fU)(),oe=re.lastPlaceAddedSectionId,ae=re.onAddedPlaceToSection,ce=J||"full-width",ie=(0,l.useState)(null),le=(0,a.A)(ie,2),ue=le[0],se=le[1],pe=(0,w.H)(),de=pe.planMapPlaceCardHeight,fe=(0,k.y)(z),me=(0,P.D)((function(e){(0,_.oR)({text:e,color:_.TS.default})}),[]),ge=(0,l.useRef)(null),he=(0,P.D)((function(e){ge.current&&ge.current.fitBounds(e)}),[]),ve=(0,N.xI)(Q,null),ye=(0,l.useState)(null),be=(0,a.A)(ye,2),Se=be[0],Ae=be[1],ke=(0,l.useRef)(null),Oe=(0,C.Y)({stateBounds:Se,latestBoundsRef:ke,showToast:me,fitBounds:he,clearSelectedItem:ve,onSelectItem:Q}),Pe=Oe.searchState,Ee=Oe.clearSearch,we=Oe.search,xe=Oe.searchedFromSectionId,Ie=(0,l.useRef)(n);(0,l.useEffect)((function(){var e=new Set("done"===(null==Pe?void 0:Pe.status)?Pe.result.map((function(e){return e.placeId})):[]),t=!!(Z&&Z.isPlace&&e.has(Z.googlePlaceId));if(Ie.current&&!t)if(Ie.current.length!==n.length)Ee();else{var r,o=B(n.entries());try{for(o.s();!(r=o.n()).done;){var c=(0,a.A)(r.value,2),i=c[0],l=c[1];if(Ie.current[i].blocks.length!==l.blocks.length){Ee();break}}}catch(e){o.e(e)}finally{o.f()}}Ie.current=n}),[Ee,n,Pe,Z]),(0,l.useImperativeHandle)(q,(function(){return{searchPlace:we,clearSearch:Ee}})),(0,l.useEffect)((function(){var e=null!=F&&n.find((function(e){return e.id===F}));e&&se((0,f.km)(e,{fillUntitled:!1,datePreference:ne.datePreference,t}))}),[n,ne.datePreference,F,t]);var Me=(0,l.useRef)(null),Ce=(0,O.mv)((function(){var e=Me.current?{width:Me.current.clientWidth,height:Me.current.clientHeight}:{width:500,height:500},t=(0,m.$7)(n);if(o){var r=o.latitude,a=o.longitude,c=o.bounds;if(c){var i=(0,b.qu)(c,e),l=(0,S.q1)(c);return{lngLat:{longitude:l.longitude,latitude:l.latitude},zoom:i}}return{lngLat:{longitude:a||0,latitude:r||0},zoom:11}}if(1===t.length){var u=t[0];return{lngLat:{longitude:u.longitude,latitude:u.latitude},zoom:11}}var s=(0,S.gW)(t),p=(0,S.q1)(s);return{lngLat:{longitude:p.longitude,latitude:p.latitude},zoom:(0,b.qu)(s,e)+1}}),[n,o]),_e=(0,T.d7)((0,P.D)((function(e){Ae(e),$&&$(e)}),[$]),1e3),Ne=(0,P.D)((function(e){_e(e),ke.current=e}),[_e]),Te=(0,P.D)((function(){Q(null)}),[Q]),je=(0,P.D)((function(e,t){var r=(0,p.rh)(Z);if(Y&&"togglePlaceButton"===Y.type){var o=Y.onTogglePlace;if(Z&&"googlePlace"in Z&&e===r&&o){if(!Z.googlePlace||"done"!==Z.googlePlace.status)throw new Error("A place object is required to toggle whether a place is in lists");var a=t.sectionId;"add"===(0,g.Kk)({placeId:e,sections:n,sectionId:a})&&ae(a);var c="existing"===Z.type?Z.blockId:null;o(t,Z.googlePlace.googlePlace,c)}}}),[ae,n,Y,Z]),De=(0,l.useMemo)((function(){if(null==F)return n;var e,t=n.find((function(e){return e.id===F})),r=null;return t&&t.date&&(r=t.date,e=s().utc(t.date,"YYYY-MM-DD")),n.map((function(t){var n=(0,m.FM)(t.blocks,h._.place);return t.id===F?t:t.type===d.gX.hotels?R(R({},t),{},e?{blocks:H(n,e)}:{blocks:[]}):t.type===d.gX.flights?R(R({},t),{},e?{blocks:W(n,r)}:{blocks:[]}):R(R({},t),{},{blocks:[]})}))}),[n,F]),Le=null!=F&&n.find((function(e){return e.id===F})),Re=(0,v.Tb)({selectedItem:Z,datePreference:ne.datePreference,placeMetadata:L,placeSections:n,t}),Be=!!Re,Fe=(0,l.useMemo)((function(){var e;return R(R({},te),{},{bottom:Math.max(null!==(e=null==te?void 0:te.bottom)&&void 0!==e?e:0,Be&&"expandable"!==ce?de+I.c:0)})}),[de,Be,te,ce]),Ge=(0,l.useMemo)((function(){return{bottom:"expandable"===ce?y.q:0}}),[ce]),ze=(0,l.useMemo)((function(){return l.createElement(I.A,(0,r.A)({},pe,{selectedPlaceDisplayMode:ce,selectedBlock:u,onPlacesListClick:K,onPlaceDeselect:Te,selectedItem:Z,placeSections:n,datePreference:ne.datePreference,placeMetadata:L,saveButton:Y,componentsToHide:X,topChildren:Re&&l.createElement(M.A,{saveButton:Y,onSectionToggle:je,lastPlaceAddedSectionId:oe,placeMetadata:L,selectedItem:Re.selectedPlace,searchedFromSectionId:xe})}))}),[X,Te,je,oe,K,L,n,Re,pe,Y,xe,u,Z,ce,ne.datePreference]),He=(0,l.useMemo)((function(){return l.createElement(l.Fragment,null,U&&Be?l.createElement("div",{style:{position:"absolute",inset:0,marginBottom:de}},ee):ee,ze)}),[U,de,ze,ee,Be]);return l.createElement("div",{className:"row m-0 h-100"},l.createElement("div",{className:"p-0 d-flex flex-column col-12 h-100 bg-white"},!!Le&&!!fe&&l.createElement(j.Ay,{onClick:fe?fe(null):void 0,clickEvent:null,layout:"block",color:"flat",label:l.createElement(i.x6,null,"Showing only “",{sectionHeading:ue||t("Untitled section",{translationNote:"Title used for a section of a document without a title"})},"” places."," ",l.createElement("strong",{className:"text-primary"},"Show all places"))}),l.createElement(E.A,(0,r.A)({},V,{defaultCenter:Ce.lngLat,defaultZoom:Ce.zoom,className:"flex-grow-1",mapElement:G,placeSections:De,panInsets:Ge,overlays:He,edgeInsets:Fe,placeSearchState:Oe,mapRef:ge,onBoundsChanged:Ne}))))}));function H(e,t){return e.filter((function(e){if(e.hotel&&e.hotel.checkIn&&e.hotel.checkOut){var n=s().utc(e.hotel.checkIn,"YYYY-MM-DD"),r=s().utc(e.hotel.checkOut,"YYYY-MM-DD");return t>=n&&t<=r}return!1}))}function W(e,t){return e.filter((function(e){return!(!e.date||!t)&&t===e.date}))}t.A=z},781459:function(e,t,n){var r=n(778291),o=n(296540),a=n(307521),c=n(670015),i=n(496776),l=n(290667),u=n(212581),s=n(28917),p=n(816771),d=n(562045),f=n(902690),m=n(651954),g=n(158956),h=n(883499),v=n(735914),y=n(968483),b=n(156743),S=o.memo((function(e){var t=(0,r.Bd)().t,n=e.saveButton,S=e.selectedItem,A=e.placeMetadata,k=e.lastPlaceAddedSectionId,O=e.onSectionToggle,P=e.searchedFromSectionId,E=(0,o.useMemo)((function(){return S&&"done"===S.googlePlace.status?(0,p.ep)(S.googlePlace.googlePlace):null}),[S]),w=(0,o.useMemo)((function(){return E?A[E.placeId]:null}),[A,E]),x=(0,l.j)(O),I=(0,y.D)((function(){"outsideTripPlanSaveButton"===(null==n?void 0:n.type)&&w&&n.bookmarksInfo&&n.bookmarksInfo.onToggleSavePlace(w.id)}),[w,n]);if(!n)return null;switch(n.type){case"togglePlaceButton":return E&&!S.omitSectionDropdownSelect?o.createElement(u.A,{placeSections:n.existingSections,placeId:E.placeId,onSectionToggle:x(E.placeId),lastPlaceAddedSectionId:k,positionFixed:!0,size:h.M.sm,color:"brand",lightGrayIfSelected:!0,addToTripPlanType:n.addToTripPlanType,searchedFromSectionId:P,closeMenuOnItemClick:!0}):null;case"outsideTripPlanSaveButton":if("done"===S.googlePlace.status&&E)return o.createElement(s.A,{placeId:(0,p.LI)(S.googlePlace.googlePlace),mapsPlaceId:(null==w?void 0:w.id)||null,text:(0,d.Ve)((null==w?void 0:w.description)||"")});if(n.bookmarksInfo&&w){var M=n.bookmarksInfo.isSaved(w.id);return o.createElement(b.A,{isAddedToTrip:M,onAddedToTripToggle:I})}return null;case"saveButton":return o.createElement(f.A,{icon:c.AQ,center:!0},o.createElement(m.Ay,{className:"my-2",loading:!!n.isSaveButtonLoading,faIcon:n.isSaved?a.G0:i.G0,label:n.isSaved?t("Saved",{translationNote:"Successfully saved changes"}):t("Save",{translationNote:"Save changes made"}),onClick:n.onToggleSavePlace,color:n.isSaved?"light-gray":"dark",size:h.M.sm,clickEvent:n.isSaved?null:g.J.addSelectedPlace}));default:return(0,v.t)(n),null}}));t.A=S},803973:function(e,t,n){n.d(t,{c:function(){return A}});var r=n(58168),o=n(364467),a=n(180045),c=n(778291),i=n(296540),l=n(32485),u=n.n(l),s=n(281220),p=n(334762),d=n(267316),f=n(475919),m=n(760304),g=n(735914),h=(n(684836),["selectedBlock","componentsToHide","topChildren","onPlacesListClick","saveButton","onPlaceDeselect","planMapPlaceCardHeight","planMapPlaceCardContainerRef","setPlanMapPlaceCardHeight","initialExpanded","selectedPlaceDisplayMode"]);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=i.memo((function(e){var t=(0,c.Bd)().t,n=e.selectedBlock,o=e.componentsToHide,l=e.topChildren,v=e.onPlacesListClick,b=e.saveButton,A=e.onPlaceDeselect,k=(e.planMapPlaceCardHeight,e.planMapPlaceCardContainerRef),O=e.setPlanMapPlaceCardHeight,P=e.initialExpanded,E=e.selectedPlaceDisplayMode,w=(0,a.A)(e,h),x=null!=E?E:"full-width",I="expandable"===x&&n&&n.type!==p._.checklist&&n.text,M={componentsToHide:o,topChildren:l,onPlacesListClick:v,saveButton:b,initialExpanded:P},C=(0,s.Tb)(y(y({},w),{},{t})),_=!!C,N="expandable"===x?s.Ay:f.Ay,T=null;switch(C&&(T=i.createElement(N,(0,r.A)({},M,C,{text:I||null,imageKey:n&&n.type===p._.place?(0,d.f9)({place:n,placeMetadata:C.metadata}):C.imageKey||null,onPlacesListClick:v,topChildren:l,onClose:A,onHeightChange:O,saveButton:b}))),x){case"expandable":return i.createElement("div",{ref:k,className:u()("PlanMapPlaceOverlay__selectedCard PlanMapPlaceOverlay__selectedCardMapEmbed d-flex flex-column align-items-start justify-content-end",S)},i.createElement("div",{className:"w-100 minh-0 d-flex flex-column"},T));case"full-width":return i.createElement("div",{ref:k,className:u()("PlanMapPlaceOverlay__selectedCard d-flex flex-column justify-content-end",S)},i.createElement("div",{className:"PlanMapPlaceOverlay__selectedCardInner d-flex flex-column justify-content-end"},_&&i.createElement(m.A,null),T));case"none":return null;default:return(0,g.t)(x),null}})),S="p-3",A=16;t.A=b},227418:function(e,t,n){var r=n(58168),o=n(364467),a=n(310467),c=n(89394),i=n(3453),l=n(180045),u=n(778291),s=n(296540),p=n(997796),d=n(719179),f=n(916756),m=n(514942),g=n(554918),h=n(884439),v=n(401149),y=n(651954),b=n(158956),S=n(683056),A=n(752994),k=n(125140),O=n(976627),P=n(531492),E=n(636890),w=n(616041),x=n(968483),I=n(865619),M=n(466780),C=n(509740),_=n(304600),N=n(221523),T=n(883499),j=n(628665),D=(n(188957),n(243856)),L=n(735914),R=n(84523),B=n(122499),F=n(304886),G=n(330036),z=n(418062),H=n(458224),W=n(212518),K=["onExistingPlaceSelect","onSelectedItemChange","placeSections","onNonMarkerClick","selectedItem","isOpen","overlays","tripPlanInfo","tripPlanType","className","mapElement","onFindHotelsClick","onExitMap","hideMapLayersButton","alwaysShowRouteLines","onAlwaysShowRouteLinesToggle","mapComponent","showRouteLinesBetweenSections","distancesBetweenPlaces","onOptimizeRouteClick","edgeInsets","onBoundsChanged","initialMapLayersOverlayMode","mapLayersOverlayTitle","deemphasizedTripPlanSections","placeSectionsTitle","placeSearchState","mapRef","showMapSearchButtonOrAutocomplete"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=(0,f.PA)((function(e){var t,n,o=(0,u.Bd)().t,f=e.onExistingPlaceSelect,J=e.onSelectedItemChange,U=e.placeSections,q=e.onNonMarkerClick,X=e.selectedItem,$=e.isOpen,V=e.overlays,Z=e.tripPlanInfo,Q=e.tripPlanType,ee=e.className,te=e.mapElement,ne=e.onFindHotelsClick,re=e.onExitMap,oe=e.hideMapLayersButton,ae=e.alwaysShowRouteLines,ce=e.onAlwaysShowRouteLinesToggle,ie=e.mapComponent,le=e.showRouteLinesBetweenSections,ue=e.distancesBetweenPlaces,se=e.onOptimizeRouteClick,pe=e.edgeInsets,de=e.onBoundsChanged,fe=e.initialMapLayersOverlayMode,me=e.mapLayersOverlayTitle,ge=e.deemphasizedTripPlanSections,he=e.placeSectionsTitle,ve=e.placeSearchState,ye=e.mapRef,be=e.showMapSearchButtonOrAutocomplete,Se=(0,l.A)(e,K),Ae=(0,w.nc)().user,ke=(0,S.QU)(),Oe=(0,j.Bq)().itineraryOptions,Pe=null!==(t=null==Oe?void 0:Oe.defaultTravelMode)&&void 0!==t?t:null,Ee=(0,s.useState)(!1),we=(0,i.A)(Ee,2),xe=we[0],Ie=we[1],Me=(0,s.useState)(!1),Ce=(0,i.A)(Me,2),_e=Ce[0],Ne=Ce[1],Te=(0,s.useState)(null!=fe?fe:k.u.hidden),je=(0,i.A)(Te,2),De=je[0],Le=je[1],Re=(0,s.useState)(!1),Be=(0,i.A)(Re,2),Fe=Be[0],Ge=Be[1],ze=ve.search,He=ve.shouldShowSearchAgain,We=ve.searchState,Ke=ve.currentSearch,Je=ve.clearSearch,Ye=ve.handleSearchAgain,Ue=(0,s.useMemo)((function(){var e=1===U.length?U[0]:null;return e&&!e.heading&&he&&(e.heading=he),ge?[].concat((0,c.A)(U),(0,c.A)(ge)):U}),[ge,U,he]),qe=(0,R.I)(Ue,null!==(n=null==Z?void 0:Z.tripPlanKey)&&void 0!==n?n:null),Xe=qe.hiddenSectionIds,$e=qe.onCheckedSectionIdsChange,Ve=qe.indicatorCount,Ze=qe.checkedSectionIds,Qe=We&&("inProgress"===We.status||"done"===We.status),et=(0,B.Z)({placeSections:U,placeSearchState:ve,deemphasizedTripPlanSections:ge,tripPlanType:Q,selectedItem:X,hiddenSectionIds:Xe,alwaysShowRouteLines:ae,showRouteLinesBetweenSections:le,distancesBetweenPlaces:ue,defaultTravelMode:Pe}),tt=(0,s.useMemo)((function(){return(0,v.qo)(X,et)}),[et,X]),nt=!!ke&&(0,P.C1)(ke),rt=(0,x.D)((function(e){var t=e.listIndex,n=e.placeIndex,r=(0,v.F2)(e,U);if(r)switch(r.type){case"flight":case"rentalCar":case"train":case"bus":case"ferry":case"cruise":case"existing":return void f(r.googlePlaceId,nt);case"block":return void J(r);case"new":return;default:throw(0,L.t)(r)}else if(e.place.placeId){var o=et[t];J((0,g.LT)({placeId:e.place.placeId,marker:(0,h.lh)({list:o,placeIndex:n})}))}}),[nt,et,f,J,U]),ot=(0,x.D)((function(){Le(k.u.hidden),q&&q()}),[q]),at=(0,x.D)(function(){var e=(0,a.A)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J){e.next=2;break}return e.abrupt("return");case 2:if(!X||"new"!==X.type||X.googlePlaceId!==t){e.next=4;break}return e.abrupt("return");case 4:J((0,g.LT)({placeId:t,marker:null}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[J,X]),ct=(0,x.D)((function(){Ie(!0)}),[]),it={className:ee,mapElement:te},lt=(0,I.xI)(Le,k.u.large),ut=(0,z.mv)((function(){return(0,G.L_)(U)}),[U]),st=(0,W.f)({placeIds:ut,placeSections:U,onSelectedItemChange:J}),pt=(0,s.useMemo)((function(){return s.createElement(E.A,{className:"PlanMapWebMap__exportBtn px-3",color:"translucent-black",shadow:!0,size:T.M.mdLg,label:(0,P.C1)(ke)?o("Export",{translationNote:"Save data in a different format"}):void 0,screenReaderLabel:o("Export to Google Maps"),imageIconSrc:"/assets/GoogleMapsLogo_32x32.png",onClick:ct,clickEvent:b.J.openExportMapModal})}),[ct,o,ke]),dt=(0,s.useMemo)((function(){return s.createElement("div",{className:"PlanMapWebMap__topLeftBtns"},nt&&(null==Z?void 0:Z.showExportToGoogleMaps)&&s.createElement(_.A,{in:!Fe},pt),re&&s.createElement(y.Ay,{className:"PlanMapWebMap__exitBtn p-2",color:"translucent-black",faIcon:d.GR,shadow:!0,labelTextClassName:"ml-1",label:o("Exit map",{translationNote:"Leave map interface"}),onClick:re,clickEvent:b.J.exitFullScreenMap}))}),[nt,Fe,pt,re,o,null==Z?void 0:Z.showExportToGoogleMaps]),ft=(0,s.useMemo)((function(){return s.createElement(H.A,{className:"PlanMapWebMap__topRightBtns d-flex flex-column align-items-end w-100"},!nt&&(null==Z?void 0:Z.showExportToGoogleMaps)&&s.createElement("div",{className:"mb-2"},pt),be&&s.createElement(F.A,{onPlaceSelect:st,onPlaceSearch:ze,placeIds:ut,idSuffix:"PlanMapWebMap",focused:Fe,onFocusedChange:Ge}),!oe&&s.createElement("div",{className:"mt-2 position-relative"},s.createElement(A.A,{onClick:lt,indicatorCount:Ve}),s.createElement(k.A,{title:me,sections:Ue,mode:De,onModeChange:Le,checkedSectionIds:Ze,onCheckedSectionIdsChange:$e,alwaysShowRouteLines:ae,onAlwaysShowRouteLinesToggle:ce,onMapLayerGroupSelect:null})),ne&&s.createElement("div",{className:"mt-2"},s.createElement(O.A,{onClick:ne,canOpenTooltip:_e&&$})))}),[nt,null==Z?void 0:Z.showExportToGoogleMaps,pt,be,st,ze,ut,Fe,oe,lt,Ve,me,Ue,De,Ze,$e,ae,ce,ne,_e,$]),mt=(0,s.useMemo)((function(){return s.createElement("div",{style:{position:"relative",top:null==pe?void 0:pe.top}},s.createElement("div",{className:"PlanMapWebMap__topMiddleBtns d-flex flex-column align-items-center"},We&&Ke&&s.createElement(s.Fragment,null,s.createElement(C.A,{search:Ke,loading:"inProgress"===We.status,clickEvent:null,onClick:Je}),s.createElement(_.A,{in:He},s.createElement(y.Ay,{clickEvent:null,onClick:Ye,color:"dark",label:o("Search this area"),className:"mt-2"})))),!Qe&&s.createElement(s.Fragment,null,ft,dt))}),[null==pe?void 0:pe.top,We,Ke,Je,He,Ye,o,Qe,ft,dt]),gt=Y(Y({},Se),{},{edgeInsets:pe,overlays:s.createElement(s.Fragment,null,V,mt),onBoundsChanged:de,onNonMarkerClick:ot}),ht=Y(Y(Y({},it),gt),{},{fitMarkersOnMount:!0,markerLists:et,onMarkerClick:rt,selectedMarkerIndexes:tt,highlightedMarkerIndexes:null,checkedMarkerIndexes:null,onDragStart:ot,onDragEnd:(0,I.xI)(Ne,!0),panToNewPlace:!1}),vt=(0,x.D)((function(e){var t=ye.current;t&&t.panToPlace(e)}),[ye]);(0,N.L)({placeSections:U,panToPlace:vt});var yt=(0,I.xI)(Ie,!1),bt=(0,s.useMemo)((function(){return se?{label:o("Optimize route",{translationNote:"Find shortest route between several places"}),faIcon:p.TB,clickEvent:b.J.clickOptimizeRouteButtonOnMap,onClick:se,badge:(0,M.jn)(Ae)?"pro":void 0}:null}),[se,o,Ae]);return s.createElement(s.Fragment,null,"isGoogleMapsWithMarkers"in ie&&ie.isGoogleMapsWithMarkers?s.createElement(ie,(0,r.A)({},ht,{ref:ye,onMapIconClick:at,enableClustering:Q===D.J.story,extraMapBottomButtonProps:bt})):s.createElement(ie,ht),(null==Z?void 0:Z.showExportToGoogleMaps)&&s.createElement(m.A,{isOpen:xe,toggle:yt,tripPlanKey:Z.tripPlanKey}))}));t.A=U},509740:function(e,t,n){var r=n(778291),o=n(296540),a=n(719179),c=n(651954),i=(n(829815),n(692043)),l=o.memo((function(e){var t=(0,r.Bd)().t,n=e.onClick,l=e.clickEvent,u=e.search,s=e.loading,p=(0,i.j)(u,t),d=p.unboldedPrefix,f=p.searchText;return o.createElement(c.Ay,{clickEvent:l,label:o.createElement(o.Fragment,null,o.createElement("b",{className:"mr-1"},d,":"),o.createElement("span",{className:"font-weight-normal mr-2"},f)),faRightIcon:s?"loading":a.GR,color:"translucent-black",onClick:n,className:"SearchPlaceOverlayButton"})}));t.A=l},122499:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(364467),o=n(778291),a=n(418062),c=n(401149),i=n(817872),l=n(274522);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){var t=e.placeSections,n=e.placeSearchState,s=e.deemphasizedTripPlanSections,p=e.tripPlanType,d=e.selectedItem,f=e.hiddenSectionIds,m=e.alwaysShowRouteLines,g=e.showRouteLinesBetweenSections,h=e.distancesBetweenPlaces,v=e.defaultTravelMode,y=(0,l.AE)().datePreference,b=null==n?void 0:n.currentSearch,S=null==n?void 0:n.searchState,A=(0,o.Bd)().t,k=(0,a.mv)((function(){var e=null,n=t;return"done"===(null==S?void 0:S.status)&&S.result.length>0&&b?e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"unaddedPlaces",places:S.result},(0,i.y)(b)):s&&(e={type:"placesList",placesList:{boardSections:t,title:""}},n=s),(0,c.HK)(n,{type:p,selectedItem:d,deviceId:null,excludedSectionIds:f,alwaysShowRouteLines:m,showRouteLinesBetweenSections:!!g,distancesBetweenPlaces:h,overlayMarkers:e,defaultTravelMode:v,datePreference:y,t:A})}),[t,S,b,s,p,d,f,m,g,h,v,y,A]);return k}},212581:function(e,t,n){var r=n(58168),o=n(180045),a=n(23029),c=n(92901),i=n(885501),l=n(56822),u=n(353954),s=n(778291),p=n(296540),d=n(241811),f=n(155127),m=n.n(f),g=n(912298),h=n(307521),v=n(496776),y=n(20987),b=n(234356),S=n(193106),A=n(430459),k=n(61525),O=n(243856),P=n(274522),E=["placeSections","onSectionToggle","placeId","addToTripPlanType","lastPlaceAddedSectionId","color","lightGrayIfSelected","searchedFromSectionId"];function w(e){var t=x();return function(){var n,r=(0,u.A)(e);if(t){var o=(0,u.A)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.A)(this,n)}}function x(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(x=function(){return!!e})()}var I=function(e){(0,i.A)(n,e);var t=w(n);function n(){var e;(0,a.A)(this,n);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).getSections=(0,d.A)((function(e,t,n,r){return e.filter((function(e){return e.type===y.gX.normal})).map((function(e){var o;return{value:e.id,label:(0,b.km)(e,{dateFormat:b.iN.shortDayOfTheWeekAndTextMonth,datePreference:n,t:r}),sublabel:null!==(o=(0,b.S)(e))&&void 0!==o?o:void 0,icon:g.Pc,iconProps:{color:e.placeMarkerColor},selected:(0,k.wA)(t,e.blocks)}}))})),e.sections=function(){return e.getSections(e.props.placeSections,e.props.placeId,e.props.sessionPreferences.datePreference,e.props.t)},e.getFreeformOption=(0,d.A)((function(e){return{label:e("New list",{translationNote:"A new general list section within a document"}),icon:g.Pc}})),e.freeformOption=function(){return e.getFreeformOption(e.props.t)},e.handleToggleSelected=function(t){var n=e.props,r=n.t,o=n.onSectionToggle;0===n.placeSections.length&&o({new:!0,sectionId:(0,S.V)(),heading:r("Places to visit")}),t&&o({new:!1,sectionId:t})},e.handleEnteredFreeformOption=function(t){(0,e.props.onSectionToggle)({new:!0,sectionId:(0,S.V)(),heading:t||""})},e.renderLabel=function(){var t=e.props,n=t.t,r=t.addToTripPlanType,o=e.sections().filter((function(e){return e.selected}));return 1===o.length?n("Added",{translationNote:"Added an item to a list"}):o.length>1?n("Added to {{count}} list",{count:o.length,defaultValue:"Added to ".concat(o.length," ").concat(m()("list",o.length))}):r===O.J.recommendations?n("Add to guide"):n("Add to trip")},e}return(0,c.A)(n,[{key:"render",value:function(){var e=this.props,t=(e.placeSections,e.onSectionToggle,e.placeId,e.addToTripPlanType,e.lastPlaceAddedSectionId),n=e.color,a=e.lightGrayIfSelected,c=e.searchedFromSectionId,i=(0,o.A)(e,E);return p.createElement(A.A,(0,r.A)({label:this.renderLabel(),defaultValue:null!=c?c:t,onToggleSelected:this.handleToggleSelected,options:this.sections(),freeformOption:this.freeformOption(),onEnterFreeformOption:this.handleEnteredFreeformOption,color:n,lightGrayIfSelected:a,icon:v.G0,selectedIcon:h.G0},i))}}]),n}(p.PureComponent);I.displayName="SectionDropdownSelect",t.A=(0,s.CI)()((0,P.FP)(I))},422337:function(e,t,n){n.d(t,{b:function(){return r}});var r="https://chrome.google.com/webstore/detail/wanderlog/ppklhnpdbmedfmgidedifnpdfcdlfijn"},897624:function(e,t,n){n.d(t,{$:function(){return a},r:function(){return o}});var r=(0,n(418701).C)({value:null},{name:"GoogleAutocompleteOptionsContext"}),o=r.Context,a=r.ContextProvider},801301:function(e,t,n){var r=n(58168),o=n(180045),a=n(296540),c=n(287440),i=n(991683),l=n(786135),u=["value","onChange","geocodingOptions","getSuggestions","onAddNote","renderSuggestion","autosuggestRef","placeSearchOptions","searchedFromSectionId"],s=a.memo((function(e){e.value,e.onChange,e.geocodingOptions,e.getSuggestions,e.onAddNote,e.renderSuggestion,e.autosuggestRef,e.placeSearchOptions,e.searchedFromSectionId;var t=(0,o.A)(e,u);return a.createElement(c.Ay,(0,r.A)({},t,(0,l.W)(e),{throttleMs:0}))}));t.A=(0,i.A)(s)},907370:function(e,t,n){var r=n(58168),o=n(778291),a=n(296540),c=n(912298),i=n(261145),l=n(343702),u=n(32485),s=n.n(u),p=n(674780),d=n(945006),f=n(654332),m=n(735914),g=n(252526),h=(n(992860),n(25644)),v=a.memo((function(e){var t,n=(0,o.Bd)().t,u=e.suggestion;switch(u.type){case"extensionPromo":return a.createElement(g.A,null);case"search":t=a.createElement(a.Fragment,null,a.createElement(f.A,(0,r.A)({},y,{icon:u.icon?h.K[u.icon]:i.Mj})),a.createElement("div",{className:"text-ellipsis"},a.createElement("div",null,a.createElement("span",{className:s()({"font-weight-bold":null===u.icon})},a.createElement(d.A,{text:u.input,highlights:u.inputTextHighlights,onHighlightClick:null})),u.secondaryText&&a.createElement("span",{className:"text-muted"}," ",u.secondaryText)),u.canSeeOnMap&&a.createElement("div",null,n("See result(s) on map"))));break;case"note":t=a.createElement(a.Fragment,null,a.createElement(f.A,(0,r.A)({},y,{icon:l.jy})),a.createElement("div",{className:"text-ellipsis"},a.createElement(o.x6,null,a.createElement("span",{className:"text-muted"},"Add note for:"),a.createElement("span",null," ",(0,p.Q)({suggestionInput:u.input.trim()})))));break;case void 0:t=a.createElement(a.Fragment,null,!1!==u.showIcon&&a.createElement(f.A,(0,r.A)({},y,{icon:c.Pc})),a.createElement("div",{className:"text-ellipsis"},a.createElement("div",{className:"text-ellipsis"},a.createElement(d.A,{text:u.structured_formatting.main_text,highlights:u.structured_formatting.main_text_matched_substrings,onHighlightClick:null})),a.createElement("div",{className:"text-muted small text-ellipsis"},u.structured_formatting.secondary_text)));break;default:return(0,m.t)(u),null}return a.createElement("div",{className:"d-flex text-ellipsis align-items-center GooglePlaceSuggestion__inner"},t)})),y={className:"flex-shrink-0 mr-2",fixedWidth:!0};t.A=v},419170:function(e,t,n){var r=n(58168),o=n(364467),a=n(310467),c=n(3453),i=n(296540),l=n(801301),u=n(249922),s=n(834191),p=n(741411),d=n(214649),f=n(217071),m=n(968483),g=(n(650050),n(476098)),h=n(583632),v=n(897624),y=n(865619);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=i.memo(i.forwardRef((function(e,t){var n=e.value,o=e.onChange,b=e.id,A=e.getSuggestions,k=e.renderSuggestion,O=e.onAddNote,P=e.blurBehavior,E=e.onPlaceSearch,w=e.onFetchingPlaceDetailsChange,x=e.clearOnSelect,I=e.shouldRenderSuggestionsWhenEmpty,M=e.searchedFromSectionId,C=e.suggestionsDisplay,_=e.emptyInputSuggestionPlaceholder,N=(0,i.useContext)(v.r).value||(0,p.mR)(),T=(0,i.useRef)(null),j=(0,i.useRef)(null),D=(0,y.S0)(function(e){return e?e.name:""}(n)),L=(0,c.A)(D,2),R=L[0],B=L[1],F=(0,i.useState)(!1),G=(0,c.A)(F,2),z=G[0],H=G[1],W=(0,m.D)((function(e){H(e),w&&w(e)}),[w]),K=(0,i.useRef)(!1);(0,i.useEffect)((function(){return function(){K.current=!0}}),[]);var J=(0,m.D)((function(){setTimeout((function(){var e=T.current||j.current;e&&e.focusAndSelect()}),0)}),[]);(0,i.useImperativeHandle)(t,(function(){return{focus:J,setInput:B}}),[J,B]);var Y=(0,m.D)(function(){var e=(0,a.A)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=16;break}return e.prev=1,W(!0),B((0,f.ai)(t)),e.next=6,(0,p.vS)(t.place_id);case 6:n=e.sent,K.current||(W(!1),B(x?"":n.name),o(n)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),W(!1),(0,d.e)(e.t0);case 14:e.next=18;break;case 16:B(""),o(null);case 18:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),[x,o,B,W]),U=(0,m.D)((function(e){(0,g.oR)({text:e,color:g.TS.default})}),[]),q=(0,h.Z)({onChange:Y,autocompleteOptions:N,showToast:U,setInputTextWithoutFetching:B}),X=q.onSinglePlaceSearch,$=q.loading,V=z||$,Z=(0,i.useMemo)((function(){return S(S({},e.inputProps),{},{className:"".concat(V?"pr-5 text-ellipsis":""," ").concat(e.inputProps&&e.inputProps.className||"")})}),[V,e.inputProps]),Q=(0,i.useMemo)((function(){return E?{type:f.E$.showOnMap,onPlaceSearch:E}:{type:f.E$.selectFirstResult,onPlaceSearch:X}}),[E,X]),ee=(0,i.useMemo)((function(){return n?(0,s.t)(n):null}),[n]),te={id:b,getSuggestions:A,renderSuggestion:k,onAddNote:O,blurBehavior:P,shouldRenderSuggestionsWhenEmpty:I,searchedFromSectionId:M,suggestionsDisplay:C};return i.createElement(i.Fragment,null,i.createElement("div",{className:"position-relative"},i.createElement(l.A,(0,r.A)({},te,{value:ee,onChange:Y,inputProps:Z,placeSearchOptions:Q,baseAutosuggestRef:T,input:R,onInputChange:B})),V&&i.createElement("div",{className:"UncontrolledGooglePlaceAutosuggest__loading"},i.createElement(u.A,null))),""===R&&_&&i.createElement("div",{className:"text-center pt-3"},_))})));t.A=A},786135:function(e,t,n){n.d(t,{W:function(){return p}});var r=n(310467),o=n(296540),a=n(897624),c=n(741411),i=n(217071),l=n(907370),u=n(968483),s=n(735914);function p(e){var t=e.value,n=e.onChange,p=e.geocodingOptions,d=e.getSuggestions,f=e.renderSuggestion,m=e.onAddNote,g=e.placeSearchOptions,h=e.searchedFromSectionId,v=(0,o.useContext)(a.r).value,y=p||v;var b=y||(0,c.mR)(),S=(0,o.useCallback)((function(e){return"extensionPromo"!==e.type&&"search"!==e.type&&"note"!==e.type&&f?f(e):"search"===e.type&&g||"note"===e.type&&m||"extensionPromo"===e.type||void 0===e.type?o.createElement(l.A,{suggestion:e}):null}),[m,g,f]),A=(0,u.D)(function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.oR)({showNoteSuggestion:!!m,placeSearchType:null!==(r=null==g?void 0:g.type)&&void 0!==r?r:null,curSelected:t,input:n,geocodingOptions:b,prioritizeSearch:!1});case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,g,t,b]),k=(0,u.D)(function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=3;break}return n(null),e.abrupt("return");case 3:e.t0=t.type,e.next="extensionPromo"===e.t0?6:"search"===e.t0?7:"note"===e.t0?17:void 0===e.t0?19:21;break;case 6:return e.abrupt("break",22);case 7:if(!t.input||!g){e.next=16;break}e.t1=g.type,e.next=e.t1===i.E$.showOnMap?11:e.t1===i.E$.selectFirstResult?13:15;break;case 11:return g.onPlaceSearch((0,i.XM)(t),h),e.abrupt("break",16);case 13:return g.onPlaceSearch(t.input,h),e.abrupt("break",16);case 15:(0,s.t)(g);case 16:return e.abrupt("break",22);case 17:return m&&t.input&&m(t.input),e.abrupt("break",22);case 19:return n(t),e.abrupt("break",22);case 21:(0,s.t)(t);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,n,g,h]);return{value:t,renderSuggestion:S,getSuggestions:d||A,getSuggestionValue:i.ai,onChange:k}}},66045:function(e,t,n){n.d(t,{A:function(){return m}});var r=n(23029),o=n(92901),a=n(885501),c=n(56822),i=n(353954),l=n(296540),u=n(32485),s=n.n(u),p=n(654332);n(623106);function d(e){var t=f();return function(){var n,r=(0,i.A)(e);if(t){var o=(0,i.A)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.A)(this,n)}}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(f=function(){return!!e})()}var m=function(e){(0,a.A)(n,e);var t=d(n);function n(){return(0,r.A)(this,n),t.apply(this,arguments)}return(0,o.A)(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.children,r=e.muteIcon;return l.createElement("div",{className:"InputIconWrapper position-relative"},n,l.createElement("div",{className:s()("InputIconWrapper__left",{"text-muted":!1!==r})},l.createElement(p.A,{icon:t,fixedWidth:!0})))}}]),n}(l.PureComponent);m.displayName="InputIconWrapper"},991141:function(e,t,n){var r=n(89394),o=n(310467),a=n(364467),c=n(333031),i=n.n(c),l=n(778291),u=n(296540),s=n(916756),p=n(441933),d=n(32485),f=n.n(d),m=n(66045),g=n(419170),h=n(531492),v=n(287440),y=n(674545),b=n(907370),S=n(968483),A=(n(464476),n(400087)),k=n(217071),O=n(897624),P=n(741411),E=n(881694);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I=(0,s.PA)(u.forwardRef((function(e,t){var n=(0,l.Bd)().t,a=e.onPlaceSelect,c=e.onAddNote,s=e.clearOnSelect,d=e.markerIcon,w=e.idSuffix,I=e.blurBehavior,M=e.onPlaceSearch,C=e.placeIds,_=e.inputProps,N=e.size,T=e.onFetchingPlaceDetailsChange,j=e.showChromeExtensionPromo,D=e.defaultSuggestions,L=e.prioritizeSearch,R=e.muteIcon,B=e.searchedFromSectionId,F=(0,E.Be)().data,G=(0,u.useRef)(null),z=(0,u.useMemo)((function(){return new Set(C)}),[C]),H=(0,u.useMemo)((function(){return x(x({},_),{},{className:f()(null==_?void 0:_.className,{PlaceAutosuggest__large:"lg"===N})})}),[_,N]),W=(0,S.D)((function(e){e&&a(e)}),[a]),K=(0,S.D)((function(){var e=G.current;e&&e.focus()}),[]);(0,u.useImperativeHandle)(t,(function(){return{focus:K}}),[K]);var J=(0,u.useCallback)((function(e){var t=e.place_id,r=z.has(t);return u.createElement("div",{className:(0,h.xl)()?"":"d-flex d-sm-none align-items-center"},u.createElement(b.A,{suggestion:e}),r&&u.createElement(u.Fragment,null,u.createElement(y.A,{className:"d-none d-sm-inline small text-info"},n("Already on list")),u.createElement("div",{className:"PlaceAutosuggest__badgeContainer d-flex d-sm-none align-items-center"},u.createElement("span",{className:"PlaceAutosuggest__badge badge badge-pill"},n("On list",{translationNote:"Already added to a related list by the user"})))))}),[z,n]),Y=(0,u.useContext)(O.r).value||(0,P.mR)(),U=!(0,A.z_)()&&!1!==j&&!F.dismissedAutosuggestPromoForMapExtensionTime&&(0,h.xl)(),q=(0,S.D)(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.length||null==D||!D.length){e.next=2;break}return e.abrupt("return",D.filter((function(e){return"search"===e.type||void 0===e.type})));case 2:if(!t){e.next=8;break}return e.next=5,(0,k.oR)({showNoteSuggestion:!!c,placeSearchType:M?k.E$.showOnMap:k.E$.selectFirstResult,curSelected:null,input:t,geocodingOptions:Y,prioritizeSearch:L});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:return n=e.t0,e.abrupt("return",[].concat((0,r.A)(i()(n,(function(e){return void 0===e.type&&z.has(e.place_id)?0:1}))),(0,r.A)(U?[{type:"extensionPromo",input:t}]:[])));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[D,Y,c,M,z,L,U]);return u.createElement(m.A,{icon:d||p.sF,muteIcon:R},u.createElement(g.A,{id:"PlaceAutosuggest__".concat(w),ref:G,value:null,onChange:W,onAddNote:c,inputProps:H,blurBehavior:null!=I?I:v.Wb.clear,getSuggestions:q,renderSuggestion:J,onPlaceSearch:M,onFetchingPlaceDetailsChange:T,clearOnSelect:s,shouldRenderSuggestionsWhenEmpty:U||!(null==D||!D.length),searchedFromSectionId:B}))})));t.A=I},970233:function(e,t,n){n.d(t,{TE:function(){return i},X3:function(){return c},fU:function(){return l},m3:function(){return a}});var r=n(296540),o=(0,n(418701).C)({lastPlaceAddedSectionId:null,onAddedPlaceToSection:function(){}},{name:"WithPlanPageLastPlaceAdded"}),a=o.withProps,c=o.Context,i=o.ContextProvider;function l(){return(0,r.useContext)(c)}},252526:function(e,t,n){var r=n(296540),o=n(719179),a=n(916756),c=n(778291),i=n(320564),l=n(893987),u=n(881694),s=n(651954),p=n(158956),d=n(968483),f=(n(14483),n(616041)),m=n(466780),g=n(228184),h=n(422337),v=(0,a.PA)((function(){var e=(0,c.Bd)().t,t=(0,f.nc)().user,n=(0,u.Be)().setValue,a=(0,d.D)((function(e){e.preventDefault(),n("dismissedAutosuggestPromoForMapExtensionTime",Date.now())}),[n]),v=(0,r.useMemo)((function(){return{className:"InputIconWrapperIgnore mr-n2",clickEvent:p.J.dismissMapExtensionPromo,eventProperties:{source:"MapExtensionAutosuggestPromo"},onClick:a,faIcon:o.GR,color:"flat"}}),[a]);return r.createElement(g.A,{href:h.b,clickEvent:p.J.clickDownloadFromMapExtensionPromo,className:"d-flex align-items-center justify-content-between MapExtensionAutosuggestPromo__moveParentPadding MapExtensionAutosuggestPromo"},r.createElement(i.A,(0,m.Bd)((null==t?void 0:t.clientLatestSubscription)||null)?(0,l.SS)(e):(0,l.jO)(e)),r.createElement(s.Ay,v))}));t.A=v},893987:function(e,t,n){n.d(t,{SS:function(){return f},jO:function(){return p},l3:function(){return d},yl:function(){return s}});var r=n(364467),o=n(241811);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i=(0,o.A)((function(e){return{type:"image",src:"/assets/MapExtensionSmallPromo__chrome.png",alt:e("Google Chrome logo"),useRealImageInStoryshots:!0}})),l=(0,o.A)((function(e){return c(c({},i(e)),{},{bubbleSize:"xs"})})),u=function(e){return{secondLineText:e("Get our Chrome extension. Free for Pro users.")}},s=function(e){return{primaryText:e("Add places from anywhere on the web"),primaryTextWeight:"bold",secondLineText:e("Get our Chrome extension. Free 7-day trial."),bubble:i(e)}},p=function(e){return c(c({},s(e)),{},{bubble:l(e)})},d=function(e){return c(c({},s(e)),u(e))},f=function(e){return c(c({},p(e)),u(e))}},156743:function(e,t,n){var r=n(778291),o=n(296540),a=n(307521),c=n(496776),i=n(651954),l=n(158956),u=(0,o.memo)((function(e){var t=(0,r.Bd)().t,n=e.isAddedToTrip,u=e.onAddedToTripToggle;return o.createElement(i.Ay,{label:n?t("Saved",{translationNote:"Successfully saved changes"}):t("Save",{translationNote:"Save changes made"}),faIcon:n?a.G0:c.G0,color:n?"light-gray":"dark",onClick:u,clickEvent:l.J.clickTripPlannerAddPlace,labelTextClassName:"ml-1"})}));t.A=u},899511:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(296540);function o(e,t){(0,r.useEffect)((function(){function n(n){e.current&&n.target&&!e.current.contains(n.target)&&t()}return document.addEventListener("mousedown",n),function(){document.removeEventListener("mousedown",n)}}),[t,e])}},217071:function(e,t,n){n.d(t,{E$:function(){return o},XM:function(){return h},ai:function(){return d},oR:function(){return f},uK:function(){return r}});var r,o,a=n(364467),c=n(310467),i=n(741411),l=n(834191),u=n(735914);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){switch(e.type){case"extensionPromo":case"search":case"note":return e.input;case void 0:return e.description;default:return(0,u.t)(e),""}}function f(e){return m.apply(this,arguments)}function m(){return(m=(0,c.A)(regeneratorRuntime.mark((function e(t){var n,r,o,a,c,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.input,r=t.curSelected,o=t.geocodingOptions,a=t.showNoteSuggestion,c=t.placeSearchType,u=t.prioritizeSearch,e.next=3,(0,i.pB)(n,o);case 3:return s=e.sent,r&&n===d(r)&&(s=(0,l.G)(r,s)),s=g({suggestions:s,input:n,placeSearchType:c,showNoteSuggestion:a,prioritizeSearch:u}),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){var t=e.suggestions,n=e.input,r=e.placeSearchType,a=e.showNoteSuggestion,c=e.prioritizeSearch,i=t,l={type:"search",input:n,inputTextHighlights:[],seeLocations:!1,canSeeOnMap:!0,secondaryText:null,icon:null},s=[{length:n.length,offset:0}];switch(i=i.map((function(e){return"input"in e?p(p({},e),{},{inputTextHighlights:s}):e})),r){case o.showOnMap:case o.selectFirstResult:if(c)(i=i.filter((function(e){return!("input"in e&&(null==e?void 0:e.input)===n)}))).unshift(l);else if(i.length<5)i.some((function(e){return"input"in e&&(null==e?void 0:e.input)===n}))||i.push(l);break;case null:break;default:(0,u.t)(r)}switch(a&&i.push({type:"note",input:n}),r){case o.selectFirstResult:i=i.map((function(e){return"search"!==e.type?e:p(p({},e),{},{canSeeOnMap:!1,seeLocations:!1,secondaryText:e.seeLocations?null:e.secondaryText})}));break;case o.showOnMap:break;case null:i=i.filter((function(e){return"search"!==e.type}));break;default:(0,u.t)(r)}return i}function h(e){return"".concat(e.input).concat(e.secondaryText&&!e.seeLocations?" ".concat(e.secondaryText):"")}!function(e){e.food="food",e.attractions="attractions",e.gasStation="gas station",e.evCharging="ev charging",e.restStops="rest stops"}(r||(r={})),function(e){e.selectFirstResult="selectFirstResult",e.showOnMap="showOnMap"}(o||(o={}))},583632:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(310467),o=n(778291),a=n(968483),c=n(741411),i=n(203027),l=n(516506);function u(e){var t=e.onChange,n=e.autocompleteOptions,u=e.showToast,s=e.setInputTextWithoutFetching,p=(0,o.Bd)().t,d=(0,a.D)(function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(r){var o,a,l,d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,c._J)(n),a=o.location,l=o.radius,e.next=3,(0,c.hc)({query:r,radiusMeters:l,longitude:a.longitude,latitude:a.latitude});case 3:if(0!==(d=e.sent).length){e.next=7;break}return u((0,i.Z)(r,p)),e.abrupt("return");case 7:f=d[0],s(f.name),t({structured_formatting:{main_text:f.name},place_id:f.placeId,description:"",matched_substrings:[],terms:[]});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,t,s,u,p]),f=(0,l.IR)(d),m=f.call,g=f.state;return{onSinglePlaceSearch:m,errorMessage:"error"===(null==g?void 0:g.status)?g.error:null,loading:"inProgress"===(null==g?void 0:g.status)}}},646860:function(e,t,n){n.d(t,{EN:function(){return i},U9:function(){return a},lb:function(){return c},mW:function(){return l},mZ:function(){return o}});var r=n(419409);function o(e){return"https://www.google.com/maps/placelists/list/".concat(e)}function a(){return"undefined"!=typeof window&&window.__CONFIG__?window.__CONFIG__.googleMapsAPIKey:""}var c=(0,r.z)("Export to Google Maps"),i=(0,r.z)("Google Maps takes up to a minute to update the place lists. Wait a few seconds and reload Google Maps if you don't see all the places you've added"),l=(0,r.z)("A Google update in early January 2025 is causing errors when exporting to Google Maps. Sorry for the inconvenience! We're working on fixing it, but it may take a few weeks.")},947363:function(e,t,n){n.d(t,{C:function(){return r}});var r=110},397103:function(e,t,n){n.d(t,{$C:function(){return s},Wl:function(){return u},sg:function(){return r}});var r,o=n(296540),a=n(947363),c=n(968483),i=n(709638),l=n(158956),u=160;a.C;function s(e){var t=(0,o.useRef)(!1);return(0,c.D)((function(){t.current||(t.current=!0,(0,i.sx)(l.J.viewHotelBookingEntryPoint,{entryPoint:e}))}),[e])}!function(e){e.reservationEmails="Reservation emails",e.mapButton="Map button",e.itineraryDays="Itinerary days",e.homeBottomButton="Home bottom button",e.explore="Explore",e.homePage="Home page",e.hotelLandingPage="Hotel landing page",e.hotelLandingPageFooter="Hotel landing page footer",e.explorePage="Explore page",e.importEmailsModal="Import emails modal",e.placesListPage="Places list page"}(r||(r={}))},61525:function(e,t,n){n.d(t,{WC:function(){return u},wA:function(){return s}});var r=n(89394),o=n(334762),a=n(228351),c=n(486010),i=n(816771),l=n(735914);function u(e){return(0,c.MD)(function(e){var t,n;switch(e.type){case o._.place:return[e.place];case o._.rentalCar:return[e.pickUp.place,e.dropOff.place];case o._.flight:return[null===(t=e.depart.airport)||void 0===t?void 0:t.googlePlace,null===(n=e.arrive.airport)||void 0===n?void 0:n.googlePlace].filter(a.G);case o._.bus:case o._.train:case o._.ferry:return[e.depart.place,e.arrive.place];case o._.cruise:return[e.depart.place].concat((0,r.A)(e.portsOfCall.map((function(e){return e.place}))),[e.arrive.place]);case o._.attachment:case o._.note:case o._.checklist:return[];case o._.story:return[e.place].filter(a.G);default:return(0,l.t)(e),[]}}(e),(function(e){return(0,i.LI)(e)}))}function s(e,t){return t.some((function(t){return(n=t,u(n).map((function(e){return(0,i.LI)(e)}))).includes(e);var n}))}},70739:function(e,t,n){n.d(t,{Gk:function(){return k},SZ:function(){return A},jV:function(){return r}});var r,o=n(835970),a=n.n(o),c=n(468090),i=n.n(c),l=n(795093),u=n.n(l),s=n(816771),p=n(20987),d=n(330036),f=n(334762),m=n(460044),g=n(228351),h=n(532041),v=n(397103),y=n(243856);function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.checkIn<=t&&t<o.checkOut)return o}}catch(e){r.e(e)}finally{r.f()}return null}function k(e){var t=e.itinerary,n=(0,m.KZ)(t.sections,y.J.plan),r=a()(n.map((function(e){return e.blocks.filter((function(e){return e.type===f._.place&&e.hotel}))}))).map((function(e){return"hotel"in e&&e.hotel||null})).filter(g.G);return function(e){var t,n=e.dayPlanSections,r=e.existingHotels,o=[],a=null,c=n.length>0?n[n.length-1].date:null,l=b(n.slice(0,-1));try{for(l.s();!(t=l.n()).done;){var p=t.value;if(p.date)if(O(p.date,r))a&&(a.checkOut=p.date,o.push(a),a=null);else{var m=i()((0,d.FM)(p.blocks,f._.place));if(a){if(m){var g=m.place.geometry.location,h=g.lat,y=g.lng;a.place?(0,s.xJ)(a.place.longitude,a.place.latitude,y,h)>v.Wl&&(a.checkOut=p.date,o.push(a),a={checkIn:p.date,checkOut:p.date,place:{latitude:h,longitude:y}}):a.place={latitude:h,longitude:y}}}else if(a={checkIn:p.date,checkOut:p.date,place:null},m){var S=m.place.geometry.location,A=S.lat,k=S.lng;a.place={latitude:A,longitude:k}}}}}catch(e){l.e(e)}finally{l.f()}a&&c&&(a.checkOut=c,o.push(a));for(var P=u()().format("YYYY-MM-DD"),E=0;E<o.length;E++)if(o[E].checkOut>P){o[E].checkIn<P&&(o[E].checkIn=P);break}return o.slice(E)}({dayPlanSections:n.filter((function(e){return e.mode===p.dF.dayPlan&&e.date})),existingHotels:r})}function O(e,t){var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if((0,h.Ag)(o,e))return!0}}catch(e){r.e(e)}finally{r.f()}return!1}!function(e){e.importEmailsModal="Import emails modal",e.mapButton="Map button",e.hotelsSectionList="Hotels section list"}(r||(r={}))},323031:function(e,t,n){n.d(t,{G:function(){return o}});var r=n(521166);function o(e){var t=e.place,n=e.userId,o=e.text,a=e.imageKeys,c=n?{type:"user",userId:n}:{type:"unknown"},i=(0,r.z0)({place:t,addedBy:c});return o&&(i.text=o),a&&(i.imageKeys=a),i}},163959:function(e,t,n){n.d(t,{Kk:function(){return P},Ux:function(){return A},hN:function(){return w}});var r=n(89394),o=n(364467),a=n(562045),c=n(788668),i=n(20987),l=n(431317),u=n(330036),s=n(334762),p=n(228351),d=n(575664),f=n(395505),m=n(323031),g=n(486010),h=n(243856);function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(i)throw a}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){var r=S(S({},(0,l.TY)(e)),n),o=(0,d.TI)(e,t);return{ops:[(0,c.m4)((0,f.i)(e,[o]),r)],newSectionIndex:o,newSectionId:r.id}}function k(e){var t=e.sections,n=e.sectionId,o=e.placeId,a=t.map((function(e,t){var r=e.blocks;return(n?e.id===n:r.some((function(e){return O(e,o)})))?t:null})).filter(p.G);if(0===a.length)return[];var i,l=[],u=v(a);try{var s=function(){var e=i.value,n=t[e].blocks,a=(0,r.A)(n.map((function(e,t){return O(e,o)?t:null})).filter(p.G)).reverse();l.push.apply(l,(0,r.A)(a.map((function(r){return(0,c.Wt)((0,f.i)(t,[e,"blocks",r]),n[r])}))))};for(u.s();!(i=u.n()).done;)s()}catch(e){u.e(e)}finally{u.f()}return l}function O(e,t){if(e.type===s._.flight||e.type===s._.rentalCar||e.type===s._.note||e.type===s._.bus||e.type===s._.train||e.type===s._.attachment||e.type===s._.checklist||e.type===s._.ferry||e.type===s._.cruise)return null;var n=e.place;return n?("placeId"in n?n.placeId:n.place_id)===t:null}function P(e){var t=e.sections,n=e.placeId,r=e.sectionId;if(r){var o=t.find((function(e){return e.id===r}));return o&&o.blocks.some((function(e){return O(e,n)}))?"remove":"add"}return t.some((function(e){return e.blocks.some((function(e){return O(e,n)}))}))?"remove":"add"}function E(e,t){var n=(0,u.nw)(e).filter((function(e){return e.place.place_id===t&&!(0,a.Im)(e.text)}));return 0!==n.length?(0,g.ZS)(n,(function(e){return-(0,a.vA)(e.text).length}))[0].text:null}function w(e){var t=e.place,n=e.sections,r=e.section.sectionId,o=t.place_id;if("add"===P({placeId:o,sections:n,sectionId:r||null})){var a=e.text;return a||(a=E(n,t.place_id)),S(S({},function(e){var t=e.sections,n=e.section,r=e.userId,o=e.place,a=e.text,u=e.imageKeys,s=e.addDuplicates,p=(0,m.G)({place:o,userId:r,text:a,imageKeys:u});if(n.new){var g=S(S({},(0,l.TY)(t)),{},{heading:n.heading,blocks:[p]}),v=(0,d.TI)(t,h.J.plan);return{ops:[(0,c.m4)((0,f.i)(t,[v]),g)],placeBlock:p,section:g,index:0}}var y=n.sectionId,b=n.sectionId?t.findIndex((function(e){return e.id===y})):t.findIndex((function(e){return e.type===i.gX.normal}));if(-1===b)return{ops:[],placeBlock:null,section:null,index:null};var A,k,P=t[b],E=P.blocks,w=E.findIndex((function(e){return O(e,o.place_id)}));return-1===w||s?(k=E.length,A=[(0,c.m4)((0,f.i)(t,[b,"blocks",k]),p)]):(A=[],p=E[k=w]),{ops:A,placeBlock:p,section:P,index:k}}(S(S({},e),{},{text:a,imageKeys:e.imageKeys||null}))),{},{action:"add"})}return{ops:k({sections:n,placeId:o,sectionId:r||null}),section:null,placeBlock:null,index:null,action:"remove"}}},908269:function(e,t,n){n.d(t,{Go:function(){return u},OB:function(){return i},t$:function(){return l}});var r=n(460044),o=n(575664),a=n(334762);var c=[a._.attachment,a._.story,a._.note,a._.checklist];function i(e,t){return e.filter((function(e){var n=e.type;return t.has(n)}))}function l(e,t,n){return i((0,r.KZ)(e,n),t)}function u(e){var t=e.sections,n=e.allowedSectionTypes,r=e.tripPlanType,a=e.filterEmptySections;return(0,o.H2)({sections:l(t,n,r).filter((function(e){var t=e.blocks;return!a||t.some((function(e){return!c.includes(e.type)}))})),tripPlanType:r})}},212518:function(e,t,n){n.d(t,{f:function(){return d},p:function(){return p}});var r=n(310467),o=n(419409),a=n(217071),c=n(554918),i=n(741411),l=n(968483),u=n(174306),s=n(334762);function p(e){return[{input:(0,o.z)("Food",{translationNote:"A category of expenses related to food purchases; a category of places that serve food"})(e),icon:a.uK.food},{input:(0,o.z)("Attractions",{translationNote:"Tourist attractions"})(e),icon:a.uK.attractions},{input:(0,o.z)("Gas station",{translationNote:"An establishment for refueling gas for vehicles"})(e),icon:a.uK.gasStation},{input:(0,o.z)("EV charging",{translationNote:"Category of places with electric vehicle charging"})(e),icon:a.uK.evCharging},{input:(0,o.z)("Rest stops",{translationNote:"Roadside areas for people to stop to rest, eat or refuel"})(e),icon:a.uK.restStops}].map((function(e){return{type:"search",input:e.input,inputTextHighlights:[],secondaryText:null,seeLocations:!1,canSeeOnMap:!1,icon:e.icon}}))}function d(e){var t=e.placeIds,n=e.placeSections,o=e.onSelectedItemChange,a=(0,l.D)(function(){var e=(0,r.A)(regeneratorRuntime.mark((function e(r){var a,l,p,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(a=t.find((function(e){return e===r.place_id})),l=(0,u.vI)(n,(function(e){var t;return"place"in e&&(null===(t=e.place)||void 0===t?void 0:t.placeId)===a})),!a||!l||l.current.type!==s._.place){e.next=9;break}p=(0,c.Bk)({section:l.section,block:l.current,blockIndex:l.blockIndex}),o(p),e.next=14;break;case 9:return o((0,c.LT)({placeId:r.place_id,place:null,marker:null})),e.next=12,(0,i.vS)(r.place_id);case 12:d=e.sent,o((0,c.LT)({placeId:r.place_id,place:d,marker:null}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[o,t,n]);return a}},25644:function(e,t,n){n.d(t,{K:function(){return u}});var r=n(225156),o=n(245710),a=n(594623),c=n(851404),i=n(513158),l=n(217071),u={[l.uK.food]:i.VN,[l.uK.attractions]:c.RU,[l.uK.gasStation]:o.p7,[l.uK.evCharging]:r.Pr,[l.uK.restStops]:a.A8}},221523:function(e,t,n){n.d(t,{L:function(){return p}});var r=n(302404),o=n.n(r),a=n(296540),c=n(823909),i=n(418062),l=n(330036),u=n(401149),s=n(968483);function p(e){var t=e.placeSections,n=e.panToPlace,r=(0,a.useContext)(c.Xf).contributor,p=(0,a.useRef)(null);var d=(0,i.mv)((function(){return new Set((0,l.nw)(t).map((function(e){return e.place.placeId})))}),[t]),f=(0,a.useRef)(d);return(0,a.useEffect)((function(){if(d.size===f.current.size+1){var e=(0,l.nw)(t).find((function(e){return!f.current.has(e.place.placeId)&&o()(r,e.addedBy)}));if(e&&!function(e){var t=p.current;if(!t)return!1;var n=t.placeId,r=t.toggledTimeMillis;return n===e&&Date.now()<r+5e3}(e.place.placeId)){var a=(0,u.U8)(e);a.length&&n(a[0])}}f.current=d}),[r,n,d,t]),{onPlaceToggledFromMap:(0,s.D)((function(e){p.current={placeId:e,toggledTimeMillis:Date.now()}}),[])}}},641800:function(e,t,n){n.d(t,{DH:function(){return s},Jm:function(){return u},O$:function(){return p},aT:function(){return l},mc:function(){return i}});var r=n(666245),o=n.n(r),a=n(20987),c=n(908269),i=new Set([a.gX.normal,a.gX.hotels,a.gX.flights,a.gX.rentalCars,a.gX.transit]);function l(e){return(0,c.OB)(e,i).map((function(e){return e.id}))}function u(e,t){var n=l(e).length,r=s(e,t).length;return r<n?r:null}function s(e,t){return o()(l(e),t)}function p(e,t){return o()(l(e),t)}},283506:function(e,t,n){n.d(t,{XH:function(){return c},Xz:function(){return r}});var r,o=n(419409),a=n(489757);!function(e){e.restaurants="restaurants",e.attractions="attractions",e.cafes="cafes",e.desserts="desserts",e.bars="bars"}(r||(r={}));var c={[r.restaurants]:{icon:a.FR.utensils,label:(0,o.z)("Restaurants",{translationNote:"Dining establishments"})},[r.attractions]:{icon:a.FR.mapMarkerAlt,label:(0,o.z)("Attractions",{translationNote:"Tourist attractions"})},[r.cafes]:{icon:a.FR.coffee,label:(0,o.z)("Cafes")},[r.desserts]:{icon:a.FR.iceCream,label:(0,o.z)("Desserts")},[r.bars]:{icon:a.FR.wineGlass,label:(0,o.z)("Bars")}}},460044:function(e,t,n){n.d(t,{$0:function(){return G},A7:function(){return C},KZ:function(){return z},Ks:function(){return B},TM:function(){return L},hK:function(){return j},t6:function(){return R},v8:function(){return F},yZ:function(){return D},z_:function(){return T}});var r=n(364467),o=n(3453),a=n(89394),c=n(180045),i=n(142877),l=n.n(i),u=n(302404),s=n.n(u),p=n(763375),d=n.n(p),f=n(241811),m=n(20987),g=n(219199),h=n(521166),v=n(334762),y=n(324209),b=n(575664),S=n(735914),A=["blocks"],k=["blocks"],O=["place"],P=["place"],E=["airport"],w=["text","depart","arrive"],x=["place"];function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){return e.length===t.length&&e.every((function(e,n){return function(e,t){e.blocks;for(var n=(0,c.A)(e,A),r=(t.blocks,(0,c.A)(t,k)),o=0,i=d()([].concat((0,a.A)(Object.keys(n)),(0,a.A)(Object.keys(r))));o<i.length;o++){var l=i[o];if(n[l]!==r[l])return!1}if(e.blocks.length!==t.blocks.length)return!1;for(var u=0;u!==e.blocks.length;u++){var p=e.blocks[u],f=t.blocks[u];if(p.type!==f.type||p.id!==f.id)return!1;switch(p.type){case v._.place:if(f.type!==v._.place)return!1;var m=(0,h.FE)(p),g=m.place,y=(0,c.A)(m,O),b=(0,h.FE)(f),E=b.place,w=(0,c.A)(b,P);if(g.placeId!==E.placeId)return!1;if(!s()(y,w))return!1;break;case v._.story:if(f.type!==v._.story)return!1;var x=p.images.map((function(e){return e.id})),I=f.images.map((function(e){return e.id}));if(!s()(x,I))return!1;break;case v._.bus:case v._.train:case v._.ferry:case v._.rentalCar:case v._.flight:case v._.attachment:case v._.note:case v._.checklist:case v._.cruise:if(!s()(p,f))return!1;break;default:(0,S.t)(p)}}return!0}(e,t[n])}))}function _(e,t){return C((0,o.A)(e,1)[0],(0,o.A)(t,1)[0])}function N(e){var t=(0,f.A)(e),n=(0,f.A)((function(e){return e}),_);return function(){return n(t.apply(void 0,arguments))}}function T(){return N((function(e,t){return(0,g.ZW)(e,t)}))}function j(){return N((function(e,t,n){var r=(0,g.ZW)(e,t);return(0,b.Yx)(n)?(0,b.H2)({sections:r,tripPlanType:n}).flatMap((function(e){return e.sections})):r}))}function D(){return N((function(e,t){return(0,g.mG)(e,t)}))}function L(){function e(e){var t=e.airport,n=(0,c.A)(e,E);return M({airport:t&&M(M({},t),{},{googlePlace:null})},n)}function t(t){t.text;var n=t.depart,r=t.arrive;return M(M({},(0,c.A)(t,w)),{},{depart:e(n),arrive:e(r)})}return(0,f.A)((function(e){return e}),(function(e,n){var r=(0,o.A)(e,1)[0],a=(0,o.A)(n,1)[0];return s()(r.map(t),a.map(t))}))}function R(){return(0,f.A)((function(e){return e}),(function(e,t){var n=(0,o.A)(e,1)[0],r=(0,o.A)(t,1)[0];function a(e){return{placeId:e.place.place_id,checkIn:e.hotel&&e.hotel.checkIn,checkOut:e.hotel&&e.hotel.checkOut}}return s()(n.map(a),r.map(a))}))}function B(){function e(e){var t=e.place,n=(0,c.A)(e,x);return M({placeId:t.place_id},n)}return(0,f.A)((function(e){return e}),(function(t,n){var r=(0,o.A)(t,1)[0],a=(0,o.A)(n,1)[0];function c(t){return{departPlaceId:t.depart.place.place_id,arrivePlaceId:t.arrive.place.place_id,departDate:t.depart.date,arriveDate:t.arrive.date,portsOfCall:t.portsOfCall.map(e)}}return s()(r.map(c),a.map(c))}))}function F(){return(0,f.A)((function(e){return e}),(function(e,t){var n=(0,o.A)(e,1)[0],r=(0,o.A)(t,1)[0];function a(e){var t=e.pickUp,n=e.dropOff;function r(e){return{date:e.date,time:e.time,placeId:e.place.place_id}}return{pickUp:r(t),dropOff:r(n)}}return s()(n.map(a),r.map(a))}))}function G(){return(0,f.A)((function(e){return e}),(function(e,t){var n=(0,o.A)(e,1)[0],r=(0,o.A)(t,1)[0];function a(e){var t=e.depart,n=e.arrive;function r(e){return{date:e.date,time:e.time,placeId:e.place.place_id}}return{pickUp:r(t),dropOff:r(n)}}return s()(n.map(a),r.map(a))}))}function z(e,t){return(0,b.Yx)(t)?l()(e,[function(e){return void 0===e.mode||e.mode===m.dF.placeList?0:1},function(e){return e.date?(0,y.Ws)(e.date).unix():0}],["asc","asc"]):e}},834191:function(e,t,n){n.d(t,{G:function(){return o},t:function(){return a}});var r=n(89394);function o(e,t){var n=t.find((function(t){return void 0===t.type&&t.place_id===e.place_id}))||e,o=t.filter((function(t){return void 0===t.type&&t.place_id!==e.place_id}));return[n].concat((0,r.A)(o))}function a(e){return{description:e.name,structured_formatting:{main_text:e.name,main_text_matched_substrings:[],secondary_text:e.vicinity||""},matched_substrings:[],place_id:"placeId"in e?e.placeId:e.place_id,terms:[],types:e.types||[]}}},203027:function(e,t,n){n.d(t,{Z:function(){return o},n:function(){return r}});var r=1e4;function o(e,t){return t('We found no results for "{{query}}"',{query:e})}},817872:function(e,t,n){n.d(t,{y:function(){return i}});var r=n(283506),o=n(489757),a=n(980602),c=n(735914);function i(e){switch(e.type){case"search":return{icon:o.FR.mapMarkerAlt,color:a.Ql};case"mapLayerGroup":return{icon:r.XH[e.group].icon,color:a.Ql};default:return(0,c.t)(e),{icon:o.FR.mapMarkerAlt,color:a.Ql}}}},692043:function(e,t,n){n.d(t,{j:function(){return a}});var r=n(735914),o=n(283506);function a(e,t){switch(e.type){case"search":return{unboldedPrefix:t("Searching",{translationNote:"Loading search results"}),searchText:e.query};case"mapLayerGroup":return{unboldedPrefix:t("Exploring",{translationNote:"Looking around"}),searchText:o.XH[e.group].label(t)};default:return(0,r.t)(e),{unboldedPrefix:t("Searching",{translationNote:"Loading search results"}),searchText:t("Unknown",{translationNote:"An unknown value or person"})}}}},281717:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(333031),o=n.n(r);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw a}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n,r=null!=t?t:[],c=[],i=0,l=a(o()(r,(function(e){return e.offset})));try{for(l.s();!(n=l.n()).done;){var u=n.value;if(i!==u.offset){var s=e.substring(i,u.offset);c.push({text:s,isHighlight:!1})}var p=e.substring(u.offset,u.offset+u.length);c.push({text:p,isHighlight:!0}),i=u.offset+u.length}}catch(e){l.e(e)}finally{l.f()}if(i!==e.length){var d=e.substring(i);c.push({text:d,isHighlight:!1})}return c}},823909:function(e,t,n){n.d(t,{LV:function(){return l},Xf:function(){return i},Xg:function(){return c},s4:function(){return a}});var r=n(296540),o=(0,n(418701).C)({contributor:{type:"unknown"},contributors:[],ownerId:null,editors:[],onEditorChanged:function(){return null}},{name:"WithContributor"}),a=o.withProps,c=o.ContextProvider,i=o.Context;function l(){return(0,r.useContext)(i)}},752760:function(e,t,n){n.d(t,{Y:function(){return E}});var r=n(364467),o=n(310467),a=n(3453),c=n(778291),i=n(296540),l=n(155127),u=n.n(l),s=n(661393),p=n(203027),d=n(516506),f=n(816771),m=n(968483),g=n(709638),h=n(158956),v=n(741411),y=n(554918),b=n(283506),S=n(817872),A=n(277141),k=n(735914);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e){var t=e.stateBounds,n=e.latestBoundsRef,r=e.showToast,l=e.fitBounds,O=e.clearSelectedItem,E=e.onSelectItem,x=(0,c.Bd)().t,I=(0,i.useState)(null),M=(0,a.A)(I,2),C=M[0],_=M[1],N=(0,i.useState)(null),T=(0,a.A)(N,2),j=T[0],D=T[1],L=(0,i.useRef)(null),R=(0,A.b)(t),B=(0,i.useState)(!1),F=(0,a.A)(B,2),G=F[0],z=F[1],H=(0,d.IR)((0,m.D)(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(t,n){var o,a,c,i,d,f,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z(!0),D(null),e.prev=2,(0,g.sx)(h.J.searchPlaces),o=w(t)){e.next=7;break}return e.abrupt("return",[]);case 7:_(P(P({},n),o)),O(),e.t0=n.type,e.next="search"===e.t0?12:"mapLayerGroup"===e.t0?16:20;break;case 12:return e.next=14,(0,v.hc)(P(P({},n),o));case 14:return a=e.sent,e.abrupt("break",22);case 16:return e.next=18,(0,v.xJ)({mapLayerGroup:n.group,bounds:t});case 18:return a=e.sent,e.abrupt("break",22);case 20:(0,k.t)(n),a=[];case 22:if(0!==a.length){e.next=26;break}"search"===n.type?r((0,p.Z)(n.query,x)):"mapLayerGroup"===n.type?r(x("We found no {{mapLayerPlaceType}} in your current map view",{mapLayerPlaceType:b.XH[n.group].label(x)})):(0,k.t)(n),e.next=38;break;case 26:return c=(0,S.y)(n),i=a[0].placeId,E((0,y.LT)({placeId:i,place:null,marker:{markerColor:c.color,icon:c.icon,index:0}})),e.next=31,(0,v.vS)(i);case 31:d=e.sent,E((0,y.LT)({placeId:i,place:d,marker:{markerColor:c.color,icon:c.icon,index:0}})),"search"===n.type?r(x('We found {{count}} result for "{{searchKeywords}}"',{searchKeywords:n.query,count:a.length,defaultValue:"We found ".concat(u()("result",a.length,!0),' for "').concat(n.query,'"')})):"mapLayerGroup"===n.type?r(x('We found {{numResults}} places for "{{categoryOfPlace}}": zoom in and search again to see more',{numResults:a.length,categoryOfPlace:n.group})):(0,k.t)(n),f=a.map((function(e){return{longitude:e.longitude,latitude:e.latitude}})),m=(0,s.tk)({bounds:(0,s.gW)(f),minWidth:.01,minHeight:.01}),l(m),setTimeout((function(){var e;z(!1),D(w(null!==(e=null==R?void 0:R.current)&&void 0!==e?e:null))}),1500);case 38:return e.abrupt("return",a);case 39:return e.prev=39,setTimeout((function(){z(!1)}),2e3),e.finish(39);case 42:case"end":return e.stop()}}),e,null,[[2,,39,42]])})));return function(t,n){return e.apply(this,arguments)}}(),[O,l,R,E,r,x])),W=H.state,K=H.call,J=H.clearState;(0,i.useEffect)((function(){var e=(null==n?void 0:n.current)||t,r=L.current;e&&r&&(L.current=null,K(e,r))}),[K,n,t]);var Y=(0,m.D)(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=(null==n?void 0:n.current)||t)?K(o,r):L.current=r;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[K,n,t]),U=(0,i.useMemo)((function(){var e,n,r,o,a,c,i,l,u,s,d,m,g=w(t);return!(null===C||"done"!==(null==W?void 0:W.status)||!g||j&&(e=j,n=g,a=e.longitude,c=e.latitude,i=n.longitude,l=n.latitude,u=(null!==(r=e.radiusMeters)&&void 0!==r?r:p.n)/1e3,s=(null!==(o=n.radiusMeters)&&void 0!==o?o:p.n)/1e3,d=Math.abs(u-s)/u,m=(0,f.Jk)({longitude:a,latitude:c},{longitude:i,latitude:l})/u,!(d>.25||m>.25)))}),[t,C,null==W?void 0:W.status,j]),q=(0,m.D)((function(){J(),_(null),Q(null)}),[J]),X=(0,m.D)((function(){C&&Y(C)}),[C,Y]),$=(0,i.useState)(null),V=(0,a.A)($,2),Z=V[0],Q=V[1],ee=(0,m.D)(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(n),e.next=3,Y({type:"search",query:t});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Y]),te=(0,m.D)((function(e){return Y({type:"mapLayerGroup",group:e})}),[Y]);return(0,i.useMemo)((function(){return{search:ee,listMapLayerGroupPlaces:te,shouldShowSearchAgain:U,searchState:W,currentSearch:C,clearSearch:q,handleSearchAgain:X,doNotMoveMap:G,searchedFromSectionId:Z}}),[q,C,G,X,te,ee,W,Z,U])}function w(e){if(!e)return null;var t=(0,s.q1)(e);return{longitude:t.longitude,latitude:t.latitude,radiusMeters:1e3*(0,s.wY)(e)}}},628665:function(e,t,n){n.d(t,{B0:function(){return p},Bq:function(){return s},Ym:function(){return d},kz:function(){return g}});var r=n(296540),o=n(418701),a=n(36999),c=n(178583),i=(0,o.C)({itineraryOptions:null,onItineraryOptionsChange:null},{name:"ItineraryOptionsContext"}),l=i.ContextProvider,u=i.Context;function s(){var e=(0,r.useContext)(u),t=e.itineraryOptions,n=e.onItineraryOptionsChange,o="ItineraryOptionsProvider";return{itineraryOptions:(0,a.g)(t,null,o),onItineraryOptionsChange:(0,a.g)(n,null,o)}}var p=r.memo((function(e){return r.createElement(l,e)})),d=r.memo((function(e){var t=e.children;return r.createElement(p,{itineraryOptions:f,onItineraryOptionsChange:m},t)})),f={};function m(){}var g=(0,c.o)(s)},396883:function(){},992860:function(){},623106:function(){},14483:function(){},960362:function(){},456670:function(){},784226:function(){},713598:function(){},452681:function(){},295272:function(){},464476:function(){},167193:function(){},684836:function(){},188957:function(){},758697:function(){},829815:function(){},222155:function(){},650050:function(){}}]);