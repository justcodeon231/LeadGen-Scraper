"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3486],{793519:function(e,t,n){n.d(t,{GO:function(){return S},NU:function(){return _},Ng:function(){return O},T1:function(){return M},W8:function(){return D},n7:function(){return A},sX:function(){return P},u5:function(){return C}});var r=n(364467),a=n(3453),o=n(89394),i=n(509063),c=n.n(i),l=n(788668),u=n(395505),d=n(20987),s=n(431317),f=n(174306),p=n(334762),v=n(80587),m=n(735914),g=n(228351),y=n(782955);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function P(e){var t=e.attachments;return"emailId"in e&&e.emailId?{type:v.wh.email,id:e.emailId,subject:null}:t&&t.length>0?t[0]:null}function O(e,t,n){var r=[],a=e.sections.findIndex((function(e){return e.type===d.gX.attachments}));if(-1===a){var o=(0,s.DH)(n);o.blocks=t;var i=(0,y.x)(d.gX.attachments,e.sections);return[(0,l.m4)((0,u.i)(e,["sections",i]),o)]}var c,f=k(t);try{for(f.s();!(c=f.n()).done;){var p=c.value;r.push((0,l.m4)((0,u.i)(e,["sections",a,"blocks",e.sections[a].blocks.length]),p))}}catch(e){f.e(e)}finally{f.f()}return r}function w(e,t){switch(e.type){case v.wh.file:return t.type===v.wh.file&&e.key===t.key;case v.wh.email:return t.type===v.wh.email&&e.id===t.id;default:throw(0,m.t)(e)}}function M(e,t){var n;return[(0,l.RV)((0,u.i)(t,["attachments"]),t.attachments,[].concat((0,o.A)(null!==(n=t.attachments)&&void 0!==n?n:[]),(0,o.A)(e)))]}function _(e,t,n){var r,i=[],c=k(e.sections.entries());try{for(c.s();!(r=c.n()).done;){var d,s=(0,a.A)(r.value,2),f=s[0],m=k(s[1].blocks.entries());try{for(m.s();!(d=m.n()).done;){var g=(0,a.A)(d.value,2),y=g[0],h=g[1];if(h.id===n){var b,I=null===(b=h.attachments)||void 0===b?void 0:b.findIndex((function(e){return w(e,t)}));void 0!==I&&-1!==I&&(h.type===p._.attachment?i.push((0,l.Wt)((0,u.i)(e,["sections",f,"blocks",y]),h)):h.attachments&&i.push((0,l.Wt)([].concat((0,o.A)((0,u.i)(e,["sections",f,"blocks",y,"attachments"])),(0,o.A)((0,u.i)(h.attachments,[I]))),h.attachments[I]))),t.type===v.wh.email&&"emailId"in h&&t.id===h.emailId&&i.push((0,l.QM)([].concat((0,o.A)((0,u.i)(e,["sections",f,"blocks",y])),(0,o.A)((0,u.i)(h,["emailId"]))),h.emailId))}}}catch(e){m.e(e)}finally{m.f()}}}catch(e){c.e(e)}finally{c.f()}return i}function A(e,t,n){var r=M([t],n),a=(0,f.oB)({sections:e.sections,blockId:n.id});if(!a)return[];var o=a.sectionIndex,i=a.blockIndex;return(0,l._E)((0,u.i)(e,["sections",o,"blocks",i]),r)}var x=[p._.place,p._.flight,p._.rentalCar,p._.train,p._.bus];function C(e){return x.includes(e.type)}function S(e){var t=e.itinerary,n=e.blockId,r=e.rating,a=b({},t),o=(0,f.oB)({sections:a.sections,blockId:n});if(!o||!o.current.attachments)return[];var i=o.current.attachments.map((function(e){switch(e.type){case v.wh.email:return b(b({},e),{},{rating:r});case v.wh.file:return b({},e);default:return null}})).filter(g.G);return[(0,l.RV)((0,u.i)(a,["sections",o.sectionIndex,"blocks",o.blockIndex,"attachments"]),o.current.attachments,i)]}function D(e){var t,n=[],r=k(e);try{for(r.s();!(t=r.n()).done;){var a,o=k(t.value.blocks);try{for(o.s();!(a=o.n()).done;){var i,l,u=k(null!==(i=a.value.attachments)&&void 0!==i?i:[]);try{for(u.s();!(l=u.n()).done;){var d=l.value;n.push(d)}}catch(e){u.e(e)}finally{u.f()}}}catch(e){o.e(e)}finally{o.f()}}}catch(e){r.e(e)}finally{r.f()}return c()(n,w)}},540904:function(e,t,n){n.d(t,{W:function(){return c}});var r=n(244383),a=n.n(r),o=n(72492),i=n.n(o);function c(e){return i()(a()(e,l))}var l=(0,n(211088).L)({airline:0,number:0,departDate:0,departAirportIATA:0})},49708:function(e,t,n){n.d(t,{Cy:function(){return h},Fo:function(){return g},T8:function(){return r},_1:function(){return k},_W:function(){return b},nZ:function(){return y}});var r,a=n(562045),o=n(334762),i=n(193106),c=n(419409),l=n(788668),u=n(482594),d=n(319118),s=n(898414),f=n(620803),p=n(968483),v=n(395505),m=n(228351);function g(e){var t=e.shipName,n=e.cruiseLine,r=e.voyageNumber,c=e.portsOfCall,l=e.depart,u=e.arrive,d=e.addedBy;return{id:(0,i.V)(),type:o._.cruise,shipName:t,cruiseLine:n,voyageNumber:r,depart:l,arrive:u,portsOfCall:c,addedBy:d,text:(0,a.zP)(),attachments:[]}}!function(e){e.depart="depart",e.arrive="arrive"}(r||(r={}));var y=(0,c.z)("Add date",{translationNote:"Start or end date"}),h=(0,c.z)("Add time",{translationNote:"Start or end time, not a time duration"});function b(e){var t=e.onChange,n=e.block,r=e.onViewAttachments,a=(0,u.gI)({onChange:t,block:n}),o=(0,d.d)({onChange:t,block:n}),i=(0,s.U)({block:n,onChange:t}),c=(0,f.v)({block:n,onClick:r});return{onShipNameChange:(0,p.D)((function(e){var r=(0,l.RV)((0,v.i)(n,["shipName"]),n.shipName,e);t([r])}),[n,t]),onCruiseLineChange:(0,p.D)((function(e){var r=(0,l.RV)((0,v.i)(n,["cruiseLine"]),n.cruiseLine,e);t([r])}),[n,t]),onAttachmentClick:c,onAddAttachment:i,onNotesChange:o,onConfirmationNumberChange:a}}function k(e){return e.cruiseLine||e.shipName?[e.cruiseLine,e.shipName].filter(m.G).join(" "):[e.depart.place.name,e.arrive.place.name].join(" - ")}},423087:function(e,t,n){n.d(t,{L3:function(){return d},mx:function(){return u},py:function(){return l},xZ:function(){return r}});var r,a=n(193106),o=n(334762),i=n(228351),c=n(540904);function l(e){return{type:e.type,airport:null,date:null,time:null}}function u(e,t){return{id:(0,a.V)(),type:o._.flight,flightInfo:e,depart:l({type:"depart"}),arrive:l({type:"arrive"}),addedBy:t,text:{ops:[{insert:"\n"}]},travelerNames:[],confirmationNumber:"",attachments:[]}}function d(e){var t;if(e.type!==o._.flight)return null;var n={airline:e.flightInfo.airline.iata,departAirportIATA:null===(t=e.depart.airport)||void 0===t?void 0:t.iata,departDate:e.depart.date,number:e.flightInfo.number};return Object.values(n).every(i.G)?(0,c.W)(n):null}!function(e){e.depart="depart",e.arrive="arrive"}(r||(r={}))},879247:function(e,t,n){n.d(t,{KV:function(){return s},Wi:function(){return v},ip:function(){return r},kH:function(){return p},kS:function(){return f}});var r,a=n(795093),o=n.n(a),i=n(334762),c=n(562045),l=n(193106),u=n(647779),d=n(687272);function s(e){var t=e.addedBy,n=e.pickUp,r=e.dropOff;return{id:(0,l.V)(),type:i._.rentalCar,addedBy:t,dropOff:r,pickUp:n,text:(0,c.zP)(),attachments:[]}}function f(e,t,n){if(e.date){var r=o().utc(e.date,"YYYY-MM-DD");return{dateDisplay:(0,d.$)(r,{dateFormat:"ddd, MMM D",datePreference:n}),time:e.time&&(0,u.O)({time:e.time,format:"h:mm A",utc:!0},t)}}return null}function p(e,t){return e.place.place_id===t.place.place_id&&v(e.airportOrGeo,t.airportOrGeo)}function v(e,t){return"airport"===e.type&&"airport"===t.type?e.value.iata===t.value.iata:"geo"===e.type&&"geo"===t.type&&e.value.id===t.value.id}!function(e){e.pickUp="pickUp",e.dropOff="dropOff"}(r||(r={}))},603878:function(e,t,n){n.d(t,{O6:function(){return a},QY:function(){return v},Ww:function(){return f},e8:function(){return r},ec:function(){return m},k9:function(){return g},pJ:function(){return y},vU:function(){return p}});var r,a,o=n(334762),i=n(562045),c=n(193106),l=n(211088),u=n(489757),d=n(980602),s=n(419409),f=((0,l.L)({ferry:0,bus:0,train:0}),(0,s.z)("Add another transit",{translationNote:"Add another bus/train/ferry"})),p=(0,s.z)("Add transit",{translationNote:"Add transit (buses, trains, ferries) information, e.g. ticket"});!function(e){e.arrive="arrive",e.depart="depart"}(r||(r={})),function(e){e.train="train",e.bus="bus",e.ferry="ferry"}(a||(a={}));var v={[a.bus]:o._.bus,[a.train]:o._.train,[a.ferry]:o._.ferry},m={[a.bus]:u.FR.bus,[a.ferry]:u.FR.ferry,[a.train]:u.FR.subway},g={[a.bus]:d.x3,[a.ferry]:d.Me,[a.train]:d.x3};function y(e){var t=e.carrier,n=e.arrive,r=e.depart,a=e.addedBy,o=e.type;return{id:(0,c.V)(),type:o,carrier:t,depart:r,arrive:n,addedBy:a,text:(0,i.zP)(),attachments:[]}}},80587:function(e,t,n){n.d(t,{OW:function(){return l},iJ:function(){return c},jb:function(){return d},mJ:function(){return s},tN:function(){return a},v3:function(){return u},wh:function(){return r}});var r,a,o=n(419409),i=n(211088);function c(e){return e.type===r.file}!function(e){e.email="email",e.file="file"}(r||(r={})),function(e){e.positive="positive",e.negative="negative"}(a||(a={}));var l,u,d=(0,o.z)("Email attachment",{translationNote:"A document, image, or other file format for an email"});!function(e){e.MIME_TXT="text/plain",e.MIME_CSV="text/csv",e.MIME_DOC="application/msword",e.MIME_DOCX="application/vnd.openxmlformats-officedocument.wordprocessingml.document",e.MIME_PDF="application/pdf",e.MIME_PPT="application/vnd.ms-powerpoint",e.MIME_PPTX="application/vnd.openxmlformats-officedocument.presentationml.presentation",e.MIME_ICS="text/calendar"}(l||(l={})),function(e){e.MIME_JPEG="image/jpeg",e.MIME_PNG="image/png",e.MIME_WEBP="image/webp",e.MIME_AVIF="image/avif",e.MIME_TIFF="image/tiff",e.MIME_GIF="image/gif",e.MIME_SVG="image/svg+xml"}(u||(u={}));(0,i.L)({"application/msword":0,"application/pdf":0,"application/vnd.ms-powerpoint":0,"application/vnd.openxmlformats-officedocument.presentationml.presentation":0,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":0,"image/jpeg":0,"image/avif":0,"image/gif":0,"image/png":0,"image/tiff":0,"image/svg+xml":0,"image/webp":0,"text/plain":0,"text/csv":0,"text/calendar":0});function s(e){return"image/jpg"===e?u.MIME_JPEG:e}},174306:function(e,t,n){n.d(t,{QY:function(){return i},oB:function(){return o},vI:function(){return a}});var r=n(395505);function a(e,t,n){for(var a=0;a!==e.length;a++){var o=e[a],i=o.blocks;if(!n||n(o))for(var c=0;c!==i.length;c++){var l=o.blocks[c];if(t(l,o))return{path:(0,r.i)(e,[a,"blocks",c]),current:l,section:o,sectionIndex:a,blockIndex:c}}}return null}function o(e){var t=e.sections,n=e.blockId;return a(t,(function(e){return e.id===n}),void 0)}function i(e,t,n){var a=e[t];if(!a)return null;var o=a.blocks[n];return o?{path:(0,r.i)(e,[t,"blocks",n]),current:o,section:a,sectionIndex:t,blockIndex:n}:null}},933486:function(e,t,n){n.d(t,{$:function(){return i}});var r=n(816771),a=n(661393),o=n(401149);function i(e,t,n){return function(e,t){var n=200;return e.some((function(e){return e.blocks.flatMap((function(e){return(0,o.U8)(e)})).some((function(e){return(0,r.Jk)(e,t)<=n}))}))}(e,n)||function(e,t){return!!e&&(0,a.SC)({place:t,bounds:e})}(t,n)}},782955:function(e,t,n){n.d(t,{x:function(){return a}});var r=n(20987);function a(e,t){if(!e)return t.length;var n=r.fy.indexOf(e);if(-1===n)throw new Error("sectionIndexToAddSectionType: couldn't find indexInOrder for ".concat(e,";\n      consider adding the type to sectionTypesOrder."));var a=new Set(r.fy.slice(n+1)),o=t.findIndex((function(e){return a.has(e.type)}));return-1!==o?o:t.length}},234356:function(e,t,n){n.d(t,{S:function(){return p},hQ:function(){return f},iN:function(){return r},km:function(){return s},tb:function(){return d}});var r,a=n(555808),o=n.n(a),i=n(419409),c=n(20987),l=n(687272),u=n(173307);!function(e){e.long="long",e.shortDayOfTheWeekAndTextMonth="shortDayOfTheWeekAndTextMonth",e.shortTextMonth="shortTextMonth",e.shortNumericMonth="shortNumericMonth"}(r||(r={}));var d=(0,i.z)("(Untitled)",{translationNote:"Placeholder for untitled lists, sections, or documents"});function s(e,t){var n,a,i,l=null!==(n=t.dateFormat)&&void 0!==n?n:r.long,s=t.datePreference,p=null===(a=t.fillUntitled)||void 0===a||a,v=t.maxLength,m=t.includeSubheading,g=t.t,y=e.heading,h=e.navigationLabel,b=t.preferShorterNavigationLabel&&null!=h?h:y;if(e.friendRecommendation){var k=e.friendRecommendation.recommender,I=k.name,P=k.username;i=g("{{nameOrUsername}}'s recommendations",{translationNote:"A friend's recommendations",nameOrUsername:I||P,maxCharsPerLine:u.NK})}else e.mode===c.dF.dayPlan&&e.date?(i=o()(f(e.date,l,s)),e.heading&&m&&(i+=": ".concat(b))):i=e.mode===c.dF.guideDayPlan&&e.day?b&&m?g("Day {{number}}: {{headingOrNavigationLabel}}",{number:e.day,headingOrNavigationLabel:b,maxCharsPerLine:u.NK}):g("Day {{number}}",{number:e.day,translationNote:"Header for a particular day in an itinerary",maxCharsPerLine:u.NK}):!b&&p?d(g):b;return void 0!==v&&i.length>v?v>=10?"".concat(i.slice(0,v-3),"..."):"".concat(i.slice(0,v)):i}function f(e,t,n){switch(t){case r.shortNumericMonth:return(0,l.$)(e,{dateFormat:"ddd M/D",datePreference:n});case r.shortDayOfTheWeekAndTextMonth:return(0,l.$)(e,{dateFormat:"ddd, MMM Do",datePreference:n});case r.shortTextMonth:return(0,l.$)(e,{dateFormat:"MMM D",datePreference:n});case r.long:default:return(0,l.$)(e,{dateFormat:"dddd, MMMM Do",datePreference:n})}}function p(e){return(e.mode===c.dF.dayPlan||e.mode===c.dF.guideDayPlan)&&e.heading.length>0?e.heading:null}},431317:function(e,t,n){n.d(t,{AU:function(){return h},DH:function(){return b},MI:function(){return y},TY:function(){return p},dP:function(){return g},vt:function(){return v},xk:function(){return m}});var r=n(364467),a=n(20987),o=n(193106),i=n(969033),c=n(489757),l=n(980602);function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return{heading:"",text:{ops:[{insert:"\n"}]},blocks:[],placeMarkerColor:e?k(e):"#000000",placeMarkerIcon:"map-marker",id:(0,o.V)(),type:a.gX.normal,mode:a.dF.placeList}}function v(e){return f(f({},p()),{},{heading:e("Flights",{translationNote:"Airplane flight"}),type:a.gX.flights,placeMarkerColor:l.rw,placeMarkerIcon:c.FR.plane,blocks:[]})}function m(e){return f(f({},p()),{},{heading:e("Hotels and lodging"),type:a.gX.hotels,placeMarkerColor:l.mx,placeMarkerIcon:c.FR.bed})}function g(e){return f(f({},p()),{},{heading:e("Rental cars",{translationNote:"For the purpose of renting vehicles for temporary use"}),type:a.gX.rentalCars,placeMarkerColor:l.Sf,placeMarkerIcon:c.FR.car})}function y(e){return f(f({},p()),{},{heading:e("Transit",{translationNote:"Mode of transportation"}),type:a.gX.transit,placeMarkerColor:l.x3,placeMarkerIcon:c.FR.subway})}function h(e){return f(f({},p()),{},{heading:e("Cruise",{translationNote:"Voyage on a ship or boat taken for vacation"}),type:a.gX.cruise,placeMarkerColor:l.lo,placeMarkerIcon:c.FR.ship})}function b(e){return f(f({},p()),{},{heading:e("General attachments",{translationNote:"Miscellaneous files"}),type:a.gX.attachments})}function k(e){var t,n={},r=u(i.r6);try{for(r.s();!(t=r.n()).done;){n[t.value]=0}}catch(e){r.e(e)}finally{r.f()}var a,o=u(e);try{for(o.s();!(a=o.n()).done;){var c=a.value.placeMarkerColor;n[c]=(n[c]||0)+1}}catch(e){o.e(e)}finally{o.f()}var l,d=i.r6[0],s=u(i.r6);try{for(s.s();!(l=s.n()).done;){var f=l.value;(n[f]||0)<(n[d]||0)&&(d=f)}}catch(e){s.e(e)}finally{s.f()}return d}},575664:function(e,t,n){n.d(t,{H2:function(){return d},NI:function(){return f},Sn:function(){return s},TI:function(){return v},Xt:function(){return r},Yx:function(){return p},qV:function(){return u}});var r,a=n(20987),o=n(895397),i=n(243856),c=n(735914),l=n(419409);!function(e){e.overview="overview",e.itinerary="itinerary",e.budget="budget"}(r||(r={}));var u={[r.overview]:(0,l.z)("Overview",{translationNote:"General summary"}),[r.itinerary]:(0,l.z)("Itinerary",{translationNote:"Section of an editable document reserved for day-by-day schedules"}),[r.budget]:(0,l.z)("Budget",{translationNote:"A financial limit"})};function d(e){var t=e.sections,n=e.tripPlanType,a=e.isEditing;if(p(n)){var o=[r.overview,r.itinerary];a&&o.push(r.budget);var i=s(t);return o.map((function(e){return{tripPlanHeadingType:e,sections:i[e]}}))}return[{tripPlanHeadingType:r.overview,sections:t}]}function s(e){return(0,o.eq)(r,(function(t){return e.filter((function(e){return f(e)===t}))}))}function f(e){switch(e.mode){case a.dF.dayPlan:return r.itinerary;case a.dF.placeList:case a.dF.guideDayPlan:case void 0:return r.overview;default:throw(0,c.t)(e.mode)}}function p(e){return e===i.J.plan}function v(e,t){if(!p(t))return e.length;var n=s(e)[r.overview];if(!n.length)return 0;var a=n[n.length-1].id;return e.findIndex((function(e){return e.id===a}))+1}},219199:function(e,t,n){n.d(t,{PN:function(){return O},RJ:function(){return M},ZW:function(){return w},mG:function(){return I}});var r=n(364467),a=n(180045),o=n(747248),i=n.n(o),c=n(20987),l=n(521166),u=n(816771),d=n(933486),s=n(334762),f=n(228351),p=n(735914),v=["text"],m=["text"];function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=e.blocks.map((function(e){switch(e.type){case s._.place:return{id:e.id,type:s._.place,place:e.place,hotel:e.hotel,travelMode:e.travelMode,attachments:e.attachments,addedBy:e.addedBy};case s._.story:e.text;return(0,a.A)(e,v);case s._.note:return{id:e.id,type:s._.note,addedBy:e.addedBy,attachments:e.attachments};case s._.flight:return{id:e.id,type:s._.flight,flightInfo:e.flightInfo,depart:e.depart,arrive:e.arrive,addedBy:e.addedBy,attachments:e.attachments};case s._.rentalCar:return{id:e.id,type:e.type,addedBy:e.addedBy,pickUp:e.pickUp,dropOff:e.dropOff,attachments:e.attachments};case s._.bus:return{id:e.id,type:s._.bus,arrive:e.arrive,depart:e.depart,addedBy:e.addedBy,carrier:e.carrier,attachments:e.attachments};case s._.train:return{id:e.id,type:s._.train,arrive:e.arrive,depart:e.depart,addedBy:e.addedBy,carrier:e.carrier,attachments:e.attachments};case s._.ferry:return{id:e.id,type:s._.ferry,arrive:e.arrive,depart:e.depart,addedBy:e.addedBy,carrier:e.carrier,attachments:e.attachments};case s._.attachment:return{id:e.id,title:e.title,type:s._.attachment,attachments:e.attachments,addedBy:e.addedBy};case s._.checklist:return{id:e.id,type:s._.checklist,attachments:e.attachments,addedBy:e.addedBy};case s._.cruise:return{id:e.id,type:s._.cruise,arrive:e.arrive,depart:e.depart,portsOfCall:e.portsOfCall,cruiseLine:e.cruiseLine,shipName:e.shipName,voyageNumber:e.voyageNumber,attachments:e.attachments,addedBy:e.addedBy};default:return(0,p.t)(e),null}})).filter(f.G);e.text;return b(b({},(0,a.A)(e,m)),{},{blocks:t})}function I(e,t){var n=e.map(k),r=e.find((function(e){return e.type===c.gX.flights})),a=n.find((function(e){return e.type===c.gX.flights}));if(r&&r.blocks&&a){var o,i=g(r.blocks);try{for(i.s();!(o=i.n()).done;){var l=o.value;if("flight"===l.type){var u=l.arrive,d=l.depart,f=P(u,n,t),p=P(d,n,t),v={id:l.id,travelMode:null,attachments:l.attachments};f&&a.blocks.push(b(b({},v),{},{type:s._.place,place:f,date:l.arrive.date,addedBy:l.addedBy})),p&&a.blocks.push(b(b({},v),{},{type:s._.place,place:p,date:l.depart.date,addedBy:l.addedBy}))}}}catch(e){i.e(e)}finally{i.f()}}return n}function P(e,t,n){var r=e.airport&&e.airport.googlePlace;if(r){var a=(0,u.ep)(r);if((0,d.$)(t,n,a))return a}return null}function O(e,t,n){var r=b({fillDescription:!0,allowMinimalPlace:!1},n),a=r.fillDescription,o=r.allowMinimalPlace;return b(b({},e),{},{blocks:e.blocks.map((function(e){if(e.type===s._.place){var n=t&&t.metadata[e.place.place_id],r=null==t?void 0:t.t,i=a?n&&n.description:void 0;return(0,l.fg)(e,i&&r?{t:r,description:i}:void 0,{allowMinimalPlace:o})}return e}))})}function w(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return I(M(e,void 0,n),t)}function M(e,t,n){var r=t?{t:t.t,metadata:i()(t.placeMetadata.map((function(e){return e.placeId})),t.placeMetadata)}:void 0;return e.map((function(e){return O(e,r,n)}))}},554918:function(e,t,n){n.d(t,{Bk:function(){return k},F4:function(){return _},JI:function(){return A},Kq:function(){return O},L0:function(){return j},LR:function(){return M},LT:function(){return C},Q5:function(){return F},RP:function(){return S},_u:function(){return T},au:function(){return b},cm:function(){return P},fm:function(){return I},ks:function(){return w},om:function(){return L},rh:function(){return B},vC:function(){return D}});var r=n(89394),a=n(364467),o=n(816771),i=n(489757),c=n(219199),l=n(330036),u=n(933486),d=n(334762),s=n(879247),f=n(603878),p=n(980602),v=n(49708);function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t){return(0,l.FM)(t.slice(0,e),d._.place).length}function k(e){var t=e.section,n=e.block,r=e.blockIndex,a=e.omitSectionDropdownSelect,o=void 0!==a&&a,i={isPlace:!0,type:"existing",blockId:n.id,marker:{markerColor:t.placeMarkerColor,icon:t.placeMarkerIcon||null,index:b(r,t.blocks)},sectionDate:t.date||null};return"placeId"in n.place?h(h({},i),{},{googlePlaceId:n.place.placeId,googlePlace:{status:"loading"},omitSectionDropdownSelect:o}):h(h({},i),{},{googlePlaceId:n.place.place_id,googlePlace:{googlePlace:n.place,status:"done"},omitSectionDropdownSelect:o})}function I(e){var t=e.block,n=e.section,r=e.blockIndex;return t.place?{isPlace:!0,type:"existing",blockId:t.id,googlePlaceId:t.place.placeId,googlePlace:{status:"loading"},marker:{markerColor:n.placeMarkerColor,icon:n.placeMarkerIcon||null,index:r},sectionDate:null}:{isPlace:!1,type:"block",blockId:t.id}}function P(e){var t=e.block,n=e.section,a=e.blockIndex,o=e.placeId,i=[h(h({},t.depart),{},{stop:v.T8.depart})].concat((0,r.A)(t.portsOfCall.map((function(e){return{place:e.place,stop:v.T8.depart}}))),[h(h({},t.arrive),{},{stop:v.T8.arrive})]).find((function(e){return e.place.place_id===o}));return i||(i={place:t.depart.place,stop:v.T8.depart}),{isPlace:!0,type:"cruise",blockId:t.id,googlePlaceId:i.place.place_id,googlePlace:{status:"loading"},marker:{markerColor:n.placeMarkerColor,icon:n.placeMarkerIcon||null,index:a},selectedTerminus:i.stop}}function O(e,t){var n=t&&t.airport&&t.airport.googlePlace;return{isPlace:!0,type:"flight",blockId:e.id,selectedAirport:t?t.type:null,googlePlaceId:n?n.place_id:"",marker:{markerColor:p.rw,icon:i.FR.plane,index:null},googlePlace:n?{status:"done",googlePlace:n}:{status:"loading"}}}function w(e,t){var n=e[t].place;return{isPlace:!0,type:"rentalCar",blockId:e.id,terminus:t,googlePlaceId:(null==n?void 0:n.place_id)||"",marker:{markerColor:p.Sf,icon:i.FR.car,index:null},googlePlace:n?{status:"done",googlePlace:n}:{status:"loading"}}}function M(e,t){var n=t?e[t].place:e.depart.place;return{isPlace:!0,type:e.type,blockId:e.id,selectedTerminus:t,googlePlaceId:n.place_id,marker:{markerColor:f.k9[e.type],icon:f.ec[e.type],index:null},googlePlace:n?{status:"done",googlePlace:n}:{status:"loading"}}}function _(e,t){var n={place:e.depart.place,stop:v.T8.depart},a=[n].concat((0,r.A)(e.portsOfCall.map((function(e){return{place:e.place,stop:v.T8.depart}}))),[{place:e.arrive.place,stop:v.T8.arrive}]).find((function(e){return e.place.place_id===t})),o=null!=a?a:n,i=o.place,c=o.stop;return A({blockId:e.id,googlePlace:i,stop:c})}function A(e){var t=e.blockId,n=e.googlePlace,r=e.stop;return{isPlace:!0,type:"cruise",blockId:t,googlePlaceId:n.place_id,marker:{markerColor:p.lo,icon:i.FR.ship,index:null},googlePlace:{status:"done",googlePlace:n},selectedTerminus:r}}var x={markerColor:"#495057",index:null,icon:"map-marker"};function C(e){var t=e.placeId,n=e.place;return{isPlace:!0,type:"new",googlePlaceId:t,googlePlace:n?{status:"done",googlePlace:n}:{status:"loading"},marker:e.marker||x}}function S(e){return{isPlace:!1,type:"block",blockId:e}}function D(e,t,n){return function(e,t,n){var r=e.arrive&&e.arrive.airport&&e.arrive.airport.googlePlace,a=e.depart&&e.depart.airport&&e.depart.airport.googlePlace;return r&&(0,u.$)(t,n.bounds,(0,o.ep)(r))?O(e,e.arrive):a&&(0,u.$)(t,n.bounds,(0,o.ep)(a))?O(e,e.depart):O(e,null)}(e,(0,c.RJ)(t),n)}function j(e){return function(e){return w(e,s.ip.pickUp)}(e)}function T(e){return M(e,f.e8.depart)}function L(e,t){return _(e,t)}function B(e){return e&&"googlePlaceId"in e?e.googlePlaceId:null}function F(e,t){var n,a=[],i=m(t);try{for(i.s();!(n=i.n()).done;){var c,u=n.value,p=u.blocks,v=m((0,l.FM)(p,d._.flight));try{for(v.s();!(c=v.n()).done;){var g=c.value,y=g.arrive,b=g.depart;N(y,e)?a.push(O(g,y)):N(b,e)&&a.push(O(g,b))}}catch(e){v.e(e)}finally{v.f()}var P,A=m((0,l.FM)(p,d._.rentalCar));try{for(A.s();!(P=A.n()).done;){var x=P.value,C=x.pickUp,S=x.dropOff;E(C,e)?a.push(w(x,s.ip.pickUp)):E(S,e)&&a.push(w(x,s.ip.dropOff))}}catch(e){A.e(e)}finally{A.f()}var D,j=m([].concat((0,r.A)((0,l.FM)(p,d._.bus)),(0,r.A)((0,l.FM)(p,d._.train)),(0,r.A)((0,l.FM)(p,d._.ferry))));try{for(j.s();!(D=j.n()).done;){var T=D.value,L=T.arrive,B=T.depart;R(L,e)?a.push(M(T,f.e8.arrive)):R(B,e)&&a.push(M(T,f.e8.depart))}}catch(e){j.e(e)}finally{j.f()}var F,U=m((0,l.FM)(p,d._.cruise));try{for(U.s();!(F=U.n()).done;){var z=F.value,G=z.arrive,X=z.depart,V=z.portsOfCall;[X].concat((0,r.A)(V),[G]).filter((function(t){return R(t,e)})).length&&a.push(_(z,e))}}catch(e){U.e(e)}finally{U.f()}for(var H=(0,l.FM)(p,d._.place),J=(0,l.FM)(p,d._.story),W=[].concat((0,r.A)(H),(0,r.A)(J)),$=0;$<W.length;$++){var K=W[$];if(K.place)if((0,o.LI)(K.place)===e){var Y=K.type===d._.place?k({section:h(h({},u),{},{blocks:H}),block:K,blockIndex:$}):I({section:u,block:K,blockIndex:$});Y.isPlace&&a.push(Y)}}}}catch(e){i.e(e)}finally{i.f()}return a}function N(e,t){return!!(e&&e.airport&&e.airport.googlePlace&&e.airport.googlePlace.place_id===t)}function E(e,t){return(null==e?void 0:e.place.place_id)===t}function R(e,t){return e.place.place_id===t}},401149:function(e,t,n){n.d(t,{F2:function(){return q},HK:function(){return E},OT:function(){return te},U8:function(){return $},gG:function(){return Q},qo:function(){return z}});var r=n(3453),a=n(89394),o=n(180045),i=n(364467),c=n(142877),l=n.n(c),u=n(795093),d=n.n(u),s=n(20987),f=n(489757),p=n(334762),v=n(653197),m=n(228351),g=n(554918),y=n(884439),h=n(174306),b=n(423087),k=n(816771),I=n(468292),P=n(897488),O=n(486010),w=n(879247),M=n(532041),_=n(603878),A=n(234356),x=n(575664),C=n(243856),S=n(735914),D=n(330036),j=n(49708),T=["places","icon","color"];function L(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return B(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t){var n,r,i,c,l,u,d=t.excludedSectionIds,f=d?e.filter((function(e){return!d.includes(e.id)})):e,p={placeSections:f,type:t.type,deviceId:t.deviceId,options:t},v=[];if(t.overlayMarkers)switch(t.overlayMarkers.type){case"unaddedPlaces":n=N(N({},p),{},{places:t.overlayMarkers.places,icon:t.overlayMarkers.icon,color:t.overlayMarkers.color}),r=n.places,i=n.icon,c=n.color,l=R((0,o.A)(n,T)),u=function(e){var t=e.places,n=e.icon,r=e.color;return{type:y.TG.icon,zoomIntoButtonInfo:null,markerColor:r,markerIcon:n,omitLabels:!0,places:t.map((function(e){var t=e.placeId;return{id:t,placeId:t,longitude:e.longitude,latitude:e.latitude,name:e.name}}))}}({places:r,icon:i,color:c}),v=[].concat((0,a.A)(l.map((function(e){return N(N({},e),{},{deemphasize:!0,zIndex:0})}))),[u]);break;case"placesList":v=function(e,t,n){var r=t.boardSections.filter((function(e){return e.type===s.gX.hotels})),o=r.length>0?r[0].blocks:null,i=(0,D.nw)(t.boardSections).length,c=t.boardSections.flatMap((function(e,r){return V({section:e,options:n,placeBeforeFirstPlace:null,placeAfterLastPlace:null,zIndex:r,placesListHeading:e.heading||t.title,allSectionsPlaceCount:i})})),l=new Set([s.gX.flights,s.gX.hotels]),u=e.filter((function(e){return l.has(e.type)})).flatMap((function(e){return V({section:e,options:n,placeBeforeFirstPlace:null,placeAfterLastPlace:null,zIndex:null,placesListHeading:null,allSectionsPlaceCount:i})})),d=e.filter((function(e){return!l.has(e.type)})),f=d.flatMap((function(e,t){var r,a,c=(0,M.l)({hotelsSectionBlocks:o,previousSectionBlocks:t>0?d[t-1].blocks:null,date:null!==(r=e.date)&&void 0!==r?r:null}),l=(0,M.l)({hotelsSectionBlocks:o,previousSectionBlocks:t<d.length-1?d[t+1].blocks:null,date:null!==(a=e.date)&&void 0!==a?a:null});return V({section:e,options:n,placeBeforeFirstPlace:c,placeAfterLastPlace:l,zIndex:null,placesListHeading:null,allSectionsPlaceCount:i})}));return[].concat((0,a.A)(u.map((function(e){return N(N({},e),{},{zIndex:1})}))),(0,a.A)(f.map((function(e){return N(N({},e),{},{zIndex:0,deemphasize:!0})}))),(0,a.A)(c))}(f,d?N(N({},t.overlayMarkers.placesList),{},{boardSections:t.overlayMarkers.placesList.boardSections.filter((function(e){return!d.includes(e.id)}))}):t.overlayMarkers.placesList,t);break;default:(0,S.t)(t.overlayMarkers)}else v=R(p);return v=U(v,t.selectedItem)}function R(e){var t=e.placeSections,n=e.type,r=e.deviceId,a=e.options,o=t.filter((function(e){return e.type===s.gX.hotels})),i=o.length>0?o[0]:null,c=(0,D.nw)(t).length;switch(n){case C.J.plan:case C.J.recommendations:case I.w.placesList:case I.w.standalonePlacesList:return t.flatMap((function(e,n){var r=(0,M.l)({hotelsSectionBlocks:(null==i?void 0:i.blocks)||null,previousSectionBlocks:n>0?t[n-1].blocks:null,date:void 0!==e.date?e.date:null}),o=(0,M.WY)({hotelsSectionBlocks:(null==i?void 0:i.blocks)||null,nextSectionBlocks:n<t.length-1?t[n+1].blocks:null,date:void 0!==e.date?e.date:null});return V({section:e,options:a,placeBeforeFirstPlace:r,placeAfterLastPlace:o,zIndex:n,placesListHeading:null,allSectionsPlaceCount:c})}));case C.J.story:return t.map((function(e){return function(e,t){var n=e.blocks.map((function(e){return function(e,t){return K(e,!0,t)}(e,t)}));return{type:y.TG.image,places:(0,O.iF)(n),markersLine:{mode:y.lU.always,color:null,connectToPreviousList:!0}}}(e,r)}));default:throw(0,S.t)(n)}}function U(e,t){if(t&&"new"===t.type&&"done"===t.googlePlace.status){var n=t.googlePlace.googlePlace,r=n.name,a=n.place_id,o=e.map((function(e){return e.type===y.TG.icon?N(N({},e),{},{places:e.places.filter((function(e){return e.placeId!==a}))}):e})),i=t.marker,c=i.markerColor,l=i.icon,u=t.googlePlace.googlePlace.geometry.location,d=u.lat,s=u.lng,f={zoomIntoButtonInfo:null,type:y.TG.icon,markerColor:c,markerIcon:l||"map-marker",places:[{id:a,placeId:a,latitude:d,longitude:s,name:r}]};return o.push(f),o}return e}function z(e,t){if(!e)return null;var n=null,a=null;switch(e.type){case"rentalCar":n=e.terminus,a=e.googlePlaceId;break;case"train":case"bus":case"ferry":case"cruise":n=e.selectedTerminus,a=e.googlePlaceId;break;case"existing":case"flight":a=e.googlePlaceId;break;case"block":break;case"new":return U(t,e).length===t.length+1?{listIndex:t.length-1,placeIndex:0}:null;default:throw(0,S.t)(e)}var o,i=G({blockId:e.blockId,terminus:n,placeId:a}),c=L(t.entries());try{for(c.s();!(o=c.n()).done;){var l=(0,r.A)(o.value,2),u=l[0],d=l[1].places.findIndex((function(e){return e.id===i}));if(-1!==d)return{listIndex:u,placeIndex:d}}}catch(e){c.e(e)}finally{c.f()}return null}function G(e){return JSON.stringify(e)}var X=d().duration(12,"hours").asSeconds();function V(e){var t=e.section,n=e.options,r=e.placeBeforeFirstPlace,o=e.placeAfterLastPlace,i=e.zIndex,c=e.placesListHeading,l=e.allSectionsPlaceCount,u=n.alwaysShowRouteLines,d=n.showRouteLinesBetweenSections,p=n.distancesBetweenPlaces,v=n.defaultTravelMode,m=n.selectedItem,g=n.datePreference,h=n.t,b=t.placeMarkerIcon||"map-marker";t.type===s.gX.story&&(b=f.FR.mapMarkerAlt);for(var k=[].concat((0,a.A)(r?[r]:[]),(0,a.A)(t.blocks),(0,a.A)(o?[o]:[])),I=(0,O.iF)(k.map($)),P=r?1:0,w=o?I.length-1:I.length,M=P;M<w;M++){var A,x,C=I[M-1],S=I[M],D=I[M+1],j=J({section:t,distancesBetweenPlaces:p,fromPlace:S,toPlace:null!=D?D:null,defaultTravelMode:v}),T=J({section:t,distancesBetweenPlaces:p,fromPlace:null!=C?C:null,toPlace:S,defaultTravelMode:v});if((null==T?void 0:T.duration)&&T.duration.value<X)I[M].polylineToPrevPlace=null!==(A=null==T?void 0:T.polyline)&&void 0!==A?A:void 0;if((null==j?void 0:j.duration)&&j.duration.value<X)I[M].polylineToNextPlace=null!==(x=null==j?void 0:j.polyline)&&void 0!==x?x:void 0}var L=I.slice(P,w),B=t.type===s.gX.normal,F={zoomIntoButtonInfo:H({section:t,placesListHeading:c,datePreference:g,t:h}),markerColor:t.placeMarkerColor,places:L,omitLabels:t.type===s.gX.story,markersLine:{mode:t.mode===s.dF.dayPlan||t.mode===s.dF.guideDayPlan?u?y.lU.always:y.lU.selectedPlace:y.lU.never,color:W(t.placeMarkerColor),connectToPreviousList:!!d},zIndex:null!=i?i:void 0,deemphasize:!!(B&&l<100&&"existing"===(null==m?void 0:m.type)&&m.sectionDate&&m.sectionDate!==t.date)};return t.type===s.gX.transit?Object.values(_.O6).map((function(e){var t=(0,O.iF)(k.filter((function(t){return t.type.toString()===e})).map($));return N(N({},F),{},{type:y.TG.icon,markerIcon:_.ec[e],markerColor:_.k9[e],places:t})})):[N(N({},F),{},{type:y.TG.icon,markerIcon:b})]}function H(e){var t,n=e.section,r=e.placesListHeading,a=e.datePreference,o=e.t,i={datePreference:a,includeSubheading:!1},c=(0,A.km)(n,N(N({},i),{},{fillUntitled:!1,t:o})),l=null!==(t=null!=c?c:r)&&void 0!==t?t:A.tb,u=(0,A.S)(n);return{name:l,tripPlanHeadingType:r?null:(0,x.NI)(n),subheading:u}}function J(e){var t,n,r=e.section,a=e.distancesBetweenPlaces,o=e.fromPlace,i=e.toPlace,c=function(e){var t=e.section,n=e.fromPlace,r=e.toPlace,a=e.defaultTravelMode;if(null!=n&&n.placeId&&null!=r&&r.placeId){var o=t.blocks.find((function(e){return"place"===e.type&&e.place.placeId===r.placeId}));return o&&"place"===o.type&&o.travelMode?o.travelMode:(0,P.VU)({from:n,to:r,defaultTravelMode:a})}return null}({section:r,fromPlace:o,toPlace:i,defaultTravelMode:e.defaultTravelMode});if(c&&null!=o&&o.placeId&&null!=i&&i.placeId){var l=(0,P.bY)({fromPlaceId:o.placeId,toPlaceId:i.placeId},c);return null!==(t=null==a||null===(n=a[l])||void 0===n?void 0:n.route)&&void 0!==t?t:void 0}}function W(e){if("#"!==e[0])return e;if(7===e.length)return"".concat(e,"cc");if(4===e.length){for(var t="#",n=1;n<e.length;n++)t+="".concat(e[n]).concat(e[n]);return"".concat(t,"cc")}return e}function $(e){return K(e,!1,null)}function K(e,t,n){var r=[],o=[];switch(e.type){case p._.place:var i=e.place,c=i.latitude,u=i.longitude,d=i.name,s=i.placeId;t&&e.imageKeys&&(o=e.imageKeys.map((function(e){return(0,v.Of)({key:e,size:"small"})}))),r=[{id:G({blockId:e.id,terminus:null,placeId:e.place.placeId}),placeId:s,latitude:c,longitude:u,name:d}];break;case p._.story:if(t&&(o=l()(e.images,(function(e){return e.featured}),"desc").map((function(e){return function(e,t){if(e.local&&e.local.deviceId===t)return e.local.url;if(e.imageKey)return(0,v.Of)({key:e.imageKey,size:"small"});return null}(e,n)})).filter(m.G)),e.place){var f=e.place,g=f.latitude,y=f.longitude,h=f.name,b=f.placeId;r=[{id:G({blockId:e.id,terminus:null,placeId:e.place.placeId}),placeId:b,latitude:g,longitude:y,name:h}]}else if(e.center){var k=e.center,I=k.latitude,P=k.longitude;r=[{id:G({blockId:e.id,terminus:null,placeId:null}),placeId:null,latitude:I,longitude:P,name:e.title}]}else r=[];break;case p._.rentalCar:r=Object.values(w.ip).map((function(t){var n=e[t].place;return{id:G({blockId:e.id,terminus:t,placeId:n.place_id}),placeId:n.place_id,name:n.name,latitude:n.geometry.location.lat,longitude:n.geometry.location.lng,polylineToNextPlace:void 0}}));break;case p._.ferry:case p._.train:case p._.bus:var O=e.depart.place,M=e.arrive.place;return[Y({blockId:e.id,stop:_.e8.depart,terminus:O}),Y({blockId:e.id,stop:_.e8.arrive,terminus:M})];case p._.cruise:return[Y({blockId:e.id,stop:j.T8.depart,terminus:e.depart.place})].concat((0,a.A)(e.portsOfCall.map((function(t){var n=t.place;return Y({blockId:e.id,terminus:n,stop:j.T8.depart})}))),[Y({blockId:e.id,stop:j.T8.arrive,terminus:e.arrive.place})]);case p._.flight:case p._.attachment:case p._.checklist:case p._.note:r=[];break;default:r=[],(0,S.t)(e)}return t?r.map((function(e){return N(N({},e),{},{imageUrls:o})})):r}function Y(e){var t=e.terminus,n=e.stop;return{id:G({blockId:e.blockId,terminus:n,placeId:t.place_id}),placeId:t.place_id,name:t.name,latitude:t.geometry.location.lat,longitude:t.geometry.location.lng,polylineToNextPlace:void 0}}function Z(e,t){var n,r=e.place.id,a=null;try{n=r,a=JSON.parse(n)}catch(e){}return a&&(0,h.vI)(t,(function(e){var t;return e.id===(null===(t=a)||void 0===t?void 0:t.blockId)}))||null}function q(e,t){var n=Z(e,t);if(!n)return null;var r=n.sectionIndex,a=n.blockIndex,o=n.current,i=e.place;switch(o.type){case p._.flight:for(var c=null,l=0,u=Object.values(b.xZ);l<u.length;l++){var d=u[l],s=o[d];if(s&&s.airport&&s.airport.googlePlace)(0,k.Jk)(s.airport.googlePlace.geometry.location,i)<1&&(c=s)}return(0,g.Kq)(o,c);case p._.rentalCar:var f=Object.values(w.ip).find((function(e){return o[e].place.place_id===i.placeId}));return(0,g.ks)(o,f||w.ip.pickUp);case p._.place:return(0,g.Bk)({section:t[r],block:o,blockIndex:a});case p._.story:return(0,g.fm)({section:t[r],block:o,blockIndex:a});case p._.ferry:case p._.bus:case p._.train:var v=null;return i.placeId===o.depart.place.place_id?v=_.e8.depart:i.placeId===o.arrive.place.place_id&&(v=_.e8.arrive),(0,g.LR)(o,v);case p._.cruise:return(0,g.cm)({section:t[r],block:o,blockIndex:a,placeId:i.placeId});case p._.note:case p._.attachment:case p._.checklist:return null;default:return(0,S.t)(o),null}}function Q(e){var t=e.sections,n=e.lodgingOffers,r=e.defaultTravelMode,o=e.datePreference,i=e.t,c=E(t,{type:C.J.plan,selectedItem:null,deviceId:null,overlayMarkers:null,excludedSectionIds:null,alwaysShowRouteLines:!1,distancesBetweenPlaces:null,defaultTravelMode:r,datePreference:o,t:i}).filter((function(e){return e.type===y.TG.icon})).map((function(e){return N(N({},e),{},{deemphasize:!0,zIndex:0})})),u=l()(n||[],(function(e){return e.priceRate.amount}),"desc"),d={type:y.TG.lodging,places:u.map(ee)};return[].concat((0,a.A)(c),[d])}function ee(e){var t=e.offerId,n=e.priceRate,r=e.lodging,a=e.searchOptions,o=a.dates,i=a.guests,c=e.source,l=e.includesDueAtPropertyFees,u=e.priceRates;return{id:t,placeId:null,latitude:r.location.latitude,longitude:r.location.longitude,name:r.name,offer:{offerId:t,lodging:r,priceRate:n,source:c,includesDueAtPropertyFees:l,priceRates:u,searchOptions:{dates:o,guests:i}}}}function te(e,t){var n=t.findIndex((function(e){return e.type===y.TG.lodging}));if(-1===n)return[];var r=t[n];return e?e.map((function(e){var t=r.places.findIndex((function(t){return t.id===e}));return t>=0?{listIndex:n,placeIndex:t}:null})).filter(m.G):[]}},898414:function(e,t,n){n.d(t,{U:function(){return o}});var r=n(793519),a=n(968483);function o(e){var t=e.onChange,n=e.block,o=(0,a.D)((function(e){if(n&&t){var a=(0,r.T1)([e],n);t(a)}}),[n,t]);return n&&t?o:null}},620803:function(e,t,n){n.d(t,{v:function(){return o}});var r=n(793519),a=n(968483);function o(e){var t=e.onClick,n=e.block,o=n.id,i=(0,a.D)((function(){t&&t(o)}),[o,t]);return function(e){var t=e.onClick,n=e.block;return!(!t||!(0,r.sX)(n))}({onClick:t,block:n})?i:null}},969033:function(e,t,n){n.d(t,{TQ:function(){return y},a4:function(){return h},pN:function(){return m},r6:function(){return p}});var r=n(3453),a=n(136533),o=n.n(a),i=n(574154),c=n.n(i),l=n(747248),u=n.n(l),d=n(211088),s=n(980602),f={indigo:{color:s.Kb,darkColor:s.P8},red:{color:s.nv,darkColor:s.mo},teal:{color:s.$S,darkColor:s.Pc},purple:{color:s.Zp,darkColor:s.bU},blue:{color:s.z1,darkColor:s.B6},orange:{color:s.T_,darkColor:s.Z9},green:{color:s.wL,darkColor:s.O0},yellow:{color:s.D9,darkColor:s.ty},indigoDarkest:{color:s.Nq,darkColor:s.P8},redDarkest:{color:s.k5,darkColor:s.mo},tealDarkest:{color:s.hk,darkColor:s.Pc},purpleDarkest:{color:s.B8,darkColor:s.bU},blueDarkest:{color:s.vu,darkColor:s.B6},orangeDarkest:{color:s.PD,darkColor:s.Z9},greenDarkest:{color:s.C_,darkColor:s.O0},yellowDarkest:{color:s.DU,darkColor:s.ty}},p=Object.keys(f).map((function(e){return f[e].color})),v=(0,d.L)({green:0,teal:0,blue:0,indigo:0,purple:0,red:0,orange:0,yellow:0,greenDarkest:0,tealDarkest:0,blueDarkest:0,indigoDarkest:0,purpleDarkest:0,redDarkest:0,orangeDarkest:0,yellowDarkest:0}),m=[["green","greenDarkest"],["teal","tealDarkest"],["blue","blueDarkest"],["indigo","indigoDarkest"],["purple","purpleDarkest"],["red","redDarkest"],["orange","orangeDarkest"],["yellow","yellowDarkest"]].map((function(e){return e.map((function(e){return f[e].color}))})),g=u()(v.map((function(e){return f[e].color})),v.map((function(e){return f[e].darkColor})));function y(e){var t;return null!==(t=g[e])&&void 0!==t?t:e}function h(e){for(var t=c()(e),n=0,a=Object.values(f);n<a.length;n++){var i=a[n];t[i.color]||(t[i.color]=0)}return o()(Object.entries(t),(function(e){return(0,r.A)(e,2)[1]}))[0]}},482594:function(e,t,n){n.d(t,{$W:function(){return l},MJ:function(){return u},gI:function(){return c}});var r=n(3453),a=n(296540),o=n(788668),i=n(395505);function c(e){var t=e.onChange,n=e.block;return(0,a.useCallback)((function(e){t([(0,o.RV)((0,i.i)(n,["confirmationNumber"]),n.confirmationNumber,e)])}),[n,t])}function l(e){var t=e.onChange,n=e.block,c=e.isArrivalFirst,l=(0,a.useState)(null),u=(0,r.A)(l,2),d=u[0],s=u[1];return{stop:d,setStop:s,setStopDate:(0,a.useCallback)((function(e){if(d){var r=(0,o.RV)((0,i.i)(n,[d,"date"]),n[d].date,function(e){var t=e.block,n=e.newDate,r=e.stop,a=e.isArrivalFirst,o=n;n&&("depart"===r&&t.arrive.date&&(a?n<t.arrive.date:n>t.arrive.date)?o=t.arrive.date:"arrive"===r&&t.depart.date&&(a?n>t.depart.date:n<t.depart.date)&&(o=t.depart.date));return o}({newDate:e,isArrivalFirst:c,block:n,stop:d}));t([r]),s(null)}}),[n,c,t,d]),setStopDates:(0,a.useCallback)((function(e){var r=e.startDate,a=e.endDate,l=[(0,o.RV)((0,i.i)(n,["depart","date"]),n.depart.date,c?a:r),(0,o.RV)((0,i.i)(n,["arrive","date"]),n.arrive.date,c?r:a)];t(l),s(null)}),[n,c,t])}}function u(e){var t=e.onChange,n=e.block,c=e.isArrivalFirst,l=(0,a.useState)(null),u=(0,r.A)(l,2),d=u[0],s=u[1];return{stop:d,setStop:s,setStopTimes:(0,a.useCallback)((function(e,r){var a=[(0,o.RV)((0,i.i)(n,["depart","time"]),n.depart.time,c?r:e),(0,o.RV)((0,i.i)(n,["arrive","time"]),n.arrive.time,c?e:r)];t(a),s(null)}),[n,c,t])}}},319118:function(e,t,n){n.d(t,{d:function(){return i}});var r=n(296540),a=n(788668),o=n(395505);function i(e){var t=e.onChange,n=e.block;return(0,r.useCallback)((function(e){t([(0,a.RV)((0,o.i)(n,["text"]),n.text,e)])}),[n,t])}},173307:function(e,t,n){n.d(t,{NK:function(){return a}});var r=n(594794),a=(n(822227).k0,2*r.jF/3)},468292:function(e,t,n){var r,a;n.d(t,{w:function(){return a}}),function(e){e.associatedItem="associatedItem",e.uploadingAttachment="uploadingAttachment"}(r||(r={})),function(e){e.placesList="placesList",e.standalonePlacesList="standalonePlacesList"}(a||(a={}))}}]);