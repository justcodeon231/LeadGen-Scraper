"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[7488],{971897:function(e,n,t){t.d(n,{dS:function(){return r},l$:function(){return f},q8:function(){return p},rN:function(){return l},t$:function(){return i}});var r,o=t(310467),a=t(699144),c=t(882222);function i(e){return u.apply(this,arguments)}function u(){return(u=(0,o.A)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.cB)({url:"/api/directions/distancesForMode",method:"POST",data:n});case 2:return t=e.sent,e.abrupt("return",(0,c.p0)(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return s.apply(this,arguments)}function s(){return(s=(0,o.A)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.cB)({url:"/api/directions/allDistanceInfoForPlace/v2",params:{data:JSON.stringify(n)}});case 2:return t=e.sent,e.abrupt("return",(0,c.p0)(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return d.apply(this,arguments)}function d(){return(d=(0,o.A)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,a.cB)({url:"/api/directions/optimizeRoute",method:"POST",data:n});case 2:return t=e.sent,e.abrupt("return",(0,c.p0)(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){if("placeId"in e)return{id:e.placeId,longitude:e.longitude,latitude:e.latitude};var n=e.place_id,t=e.geometry.location,r=t.lat;return{id:n,longitude:t.lng,latitude:r}}!function(e){e.driving="mapbox/driving",e.walking="mapbox/walking"}(r||(r={}))},897488:function(e,n,t){t.d(n,{Cx:function(){return O},Kg:function(){return w},Kp:function(){return x},SR:function(){return L},VU:function(){return C},Wd:function(){return r},Xn:function(){return I},bY:function(){return F},cY:function(){return j},g4:function(){return D},i5:function(){return N},iQ:function(){return _},l3:function(){return R}});var r,o=t(310467),a=t(89394),c=t(180045),i=t(364467),u=t(3453),l=t(136533),s=t.n(l),f=t(419409),d=t(20987),p=t(330036),v=t(334762),m=t(816771),g=t(532041),h=t(971897),k=t(228351),y=t(186342),b=["index"];function M(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=function(e,n){if(e){if("string"==typeof e)return A(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,i=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return c=e.done,e},e:function(e){i=!0,a=e},f:function(){try{c||null==t.return||t.return()}finally{if(i)throw a}}}}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?S(Object(t),!0).forEach((function(n){(0,i.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):S(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function P(e){var n=e.section,t=e.hotelsSectionBlocks,r=e.previousSectionBlocks,o=e.nextSectionBlocks,a={beforeBlock:null,afterBlock:null},c=(0,g.l)({hotelsSectionBlocks:t,previousSectionBlocks:r,date:n.date||null});a.beforeBlock=c;var i=(0,g.WY)({hotelsSectionBlocks:t,nextSectionBlocks:o,date:n.date||null});return a.afterBlock=i,a}function _(e){var n,t,r=e.dayPlanSections,o=e.hotelsSectionBlocks,a=e.sectionId,c=r.findIndex((function(e){return e.id===a})),i=r[c];return P({hotelsSectionBlocks:o,previousSectionBlocks:(null===(n=r[c-1])||void 0===n?void 0:n.blocks)||null,section:i,nextSectionBlocks:(null===(t=r[c+1])||void 0===t?void 0:t.blocks)||null})}function O(e){var n=e.section,t=e.distancesBetweenPlaces,r=e.beforeAfterBlocks,o=e.defaultTravelMode,a=function(e){if(!x(e))return null;var n=e.blocks,t=(0,p.FM)(n,v._.place);return t.length<1?null:t}(n);if(!a)return null;var c=0,i=0;if(r){var l=function(e){var n=e.placeBlocks,t=e.distancesBetweenPlaces,r=e.beforeAfterBlocks,o=e.defaultTravelMode,a=0,c=0,i=r.beforeBlock,l=n[0];if(i&&l){var s=L({from:i.place,to:l.place,distancesBetweenPlaces:t,travelMode:l.travelMode||null,defaultTravelMode:o}),f=(0,u.A)(s,1)[0];if("loading"!==f){var d=f.route;a+=d?d.duration.value:0,c+=d?d.distance.value:0}}var p=r.afterBlock,v=n[n.length-1];if(p&&v&&p.hotel){var m=L({from:v.place,to:p.place,distancesBetweenPlaces:t,travelMode:v.travelMode||null,defaultTravelMode:o}),g=(0,u.A)(m,1)[0];if("loading"!==g){var h=g.route;a+=h?h.duration.value:0,c+=h?h.distance.value:0}}return{durationSeconds:a,distanceMeters:c}}({placeBlocks:a,beforeAfterBlocks:r,distancesBetweenPlaces:t,defaultTravelMode:o});c+=l.durationSeconds,i+=l.distanceMeters}var s=function(e){for(var n=e.places,t=e.distancesBetweenPlaces,r=e.travelModes,o=e.defaultTravelMode,a=e.minimumKmForDrivingMode,c=0,i=0,l=0;l<n.length-1;l++){var s=L({from:n[l],to:n[l+1],distancesBetweenPlaces:t,travelMode:r[l+1]||null,defaultTravelMode:o,minimumKmForDrivingMode:a}),f=(0,u.A)(s,1)[0];if("loading"!==f){var d=f.route;c+=d?d.duration.value:0,i+=d?d.distance.value:0}}return{durationSeconds:c,distanceMeters:i}}({places:a.map((function(e){return e.place})),distancesBetweenPlaces:t,travelModes:a.map((function(e){return e.travelMode})),defaultTravelMode:o});return{durationSeconds:c+=s.durationSeconds,distanceMeters:i+=s.distanceMeters}}function w(e){var n=e.sections,t=e.travelMode,r=e.existingPlaceIdPairsObject,o=void 0===r?{}:r,a=e.defaultTravelMode,c=n.filter(x),i=n.find((function(e){return e.type===d.gX.hotels}))||null,u=I({dayPlanSections:c,hotelsSectionBlocks:(null==i?void 0:i.blocks)||null,travelMode:t,defaultTravelMode:a});return Object.keys(o).length>0&&(u=u.map((function(e){return function(e,n,t){for(var r=e.places,o=[],a=0;a<r.length;a++){var c={longitude:r[a].longitude,latitude:r[a].latitude},i=a>0?r[a-1].id:null,u=r[a].id,l=a<r.length-1?r[a+1].id:null,s=null!==i?F({fromPlaceId:i,toPlaceId:u},t):null,f=null!==l?F({fromPlaceId:u,toPlaceId:l},t):null;(null!==s&&!(s in n)||null!==f&&!(f in n))&&o.push(B({id:u},c))}return B(B({},e),{},{places:o})}(e,o,t)}))),u=u.filter((function(e){return e.places.length>=2}))}function I(e){var n,t=e.dayPlanSections,r=e.hotelsSectionBlocks,o=e.travelMode,a=e.sectionId,i=e.defaultTravelMode,u=[],l=t.map((function(e,n){return B(B({},e),{},{index:n})})),s=a?l.map((function(e){return e.id===a?e:null})).filter(k.G):l,f=M(s);try{for(f.s();!(n=f.n()).done;){var d=n.value,p=d.index,v=T({section:(0,c.A)(d,b),hotelsSectionBlocks:r,previousSectionBlocks:p>0?t[p-1].blocks:null,nextSectionBlocks:p<t.length-1?t[p+1].blocks:null,travelMode:o,defaultTravelMode:i});u=u.concat(v)}}catch(e){f.e(e)}finally{f.f()}return u}function x(e){return e.type===d.gX.normal&&(e.mode===d.dF.dayPlan||e.mode===d.dF.guideDayPlan)}function T(e){var n=e.section,t=e.hotelsSectionBlocks,r=e.previousSectionBlocks,o=e.nextSectionBlocks,c=e.travelMode,i=e.defaultTravelMode,u=(0,p.FM)(n.blocks,v._.place),l=P({section:n,hotelsSectionBlocks:t,previousSectionBlocks:r,nextSectionBlocks:o}),s=l.beforeBlock,f=l.afterBlock;if(s&&(u=[s].concat((0,a.A)(u))),null!=f&&f.hotel&&u.length){var d,m=u[u.length-1];f.travelMode=null!==(d=m.travelModeToPlaceAfterSection)&&void 0!==d?d:null}return f&&(u=[].concat((0,a.A)(u),[f])),function(e){for(var n=e.places,t=e.sectionId,r=e.travelMode,o=e.defaultTravelMode,a=[],c=[],i=1,u=1;u<n.length;u++){var l=n[u];if((l.travelMode||C({from:n[u-1].place,to:n[u].place,defaultTravelMode:o}))===r)0===c.length&&(i=u),c.push({id:l.place.place_id,longitude:l.place.geometry.location.lng,latitude:l.place.geometry.location.lat});else{if(c.length>0){var s=n[i-1];c.unshift({id:s.place.place_id,longitude:s.place.geometry.location.lng,latitude:s.place.geometry.location.lat}),a.push({places:c,sectionId:t})}c=[]}}if(c.length>0){var f=n[i-1];c.unshift({id:f.place.place_id,longitude:f.place.geometry.location.lng,latitude:f.place.geometry.location.lat}),a.push({places:c,sectionId:t})}return a}({places:u,sectionId:n.id,travelMode:c,defaultTravelMode:i})}function F(e,n){var t=e.fromPlaceId,r=e.toPlaceId;return JSON.stringify([t,r,n])}function D(e){var n=e.from,t=e.toBlock,r=e.defaultTravelMode;return t.travelMode||C({from:n,to:t.place,defaultTravelMode:r})}function C(e){var n=e.from,t=e.to,o=e.defaultTravelMode,a=e.minimumKmForDrivingMode,c=void 0===a?2:a;return(0,m.Jk)((0,m.QP)(n),(0,m.QP)(t))>c?null!=o?o:r.driving:r.walking}function L(e){var n=e.from,t=e.to,o=e.distancesBetweenPlaces,a=e.travelMode,c=e.defaultTravelMode,i=e.minimumKmForDrivingMode,u=a||C({from:n,to:t,defaultTravelMode:c,minimumKmForDrivingMode:i}),l=F({fromPlaceId:(0,m.LI)(n),toPlaceId:(0,m.LI)(t)},u),f=o[l];if(f)return[f,u];var d=Object.values(r).map((function(e){var r=F({fromPlaceId:(0,m.LI)(n),toPlaceId:(0,m.LI)(t)},e);return{mode:e,distanceInfo:o[r]}})).filter((function(e){return!!e.distanceInfo})),p=s()(d,(function(e){var n,t=e.distanceInfo;return null==t||null===(n=t.route)||void 0===n?void 0:n.distance}));if(p)return[p.distanceInfo,p.mode];if(d.length){var v=d[0];return[v.distanceInfo,v.mode]}return["loading",u]}!function(e){e.driving="driving",e.transit="transit",e.walking="walking",e.other="other"}(r||(r={}));r.driving,(0,f.z)("Driving",{translationNote:"Mode of transportation",maxCharsPerLine:y.S}),r.walking,(0,f.z)("Walking",{translationNote:"Mode of transportation",maxCharsPerLine:y.S}),r.transit,(0,f.z)("Transit",{translationNote:"Mode of transportation",maxCharsPerLine:y.S}),r.other,(0,f.z)("Other",{translationNote:"Option to pick when other options do not fit",maxCharsPerLine:y.S});function j(e){var n=e.toPlaceId,t=e.toName,r=e.fromPlaceId,o=e.fromName,a=e.travelMode;return"https://www.google.com/maps/dir/?api=1&".concat(r?"origin_place_id=".concat(r,"&origin=").concat(encodeURIComponent(o||"Unknown"),"&"):"","destination=").concat(encodeURIComponent(t||"Unknown"),"&destination_place_id=").concat(n).concat(a?"&travelmode=".concat(a):"")}function R(e){var n=new Array(e.length);n.fill(-1);var t,r=-1,o=e.map((function(e,n){return{block:e,index:n}})),a=M(o.reverse());try{for(a.s();!(t=a.n()).done;){var c=t.value,i=c.block,u=c.index;i.type===v._.place&&(r=u),n[u]=r}}catch(e){a.e(e)}finally{a.f()}return n}function N(e){return U.apply(this,arguments)}function U(){return U=(0,o.A)(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,Promise.all(Object.values(r).map(function(){var e=(0,o.A)(regeneratorRuntime.mark((function e(r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==(o=n(r)).length){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,h.t$)({placeRuns:o,travelMode:r});case 6:a=e.sent,t=B(B({},t),a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(n){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)}))),U.apply(this,arguments)}},532041:function(e,n,t){t.d(n,{Ag:function(){return l},WY:function(){return c},l:function(){return a}});var r=t(330036),o=t(334762);function a(e){var n=e.hotelsSectionBlocks,t=e.previousSectionBlocks;return u(n,e.date,"startOfDay")||i(t,"last")}function c(e){var n=e.hotelsSectionBlocks,t=e.nextSectionBlocks;return u(n,e.date,"endOfDay")||i(t,"first")}function i(e,n){if(!e)return null;var t=(0,r.FM)(e,o._.place);return 0===t.length?null:"first"===n?t[0]:t[t.length-1]}function u(e,n,t){return e&&n&&(0,r.FM)(e,o._.place).find((function(e){return e.hotel&&("startOfDay"===t?function(e,n){return e.checkIn&&e.checkOut&&e.checkIn<n&&e.checkOut>=n}(e.hotel,n):l(e.hotel,n))}))||null}function l(e,n){return e.checkIn&&e.checkOut&&e.checkIn<=n&&e.checkOut>n}},330036:function(e,n,t){t.d(n,{$7:function(){return h},Ay:function(){return M},Bu:function(){return g},C7:function(){return A},DF:function(){return d},FM:function(){return s},GS:function(){return I},L_:function(){return b},Rb:function(){return O},Tn:function(){return w},UH:function(){return _},UL:function(){return P},b_:function(){return p},cA:function(){return m},hm:function(){return v},kY:function(){return k},nw:function(){return S}});var r=t(89394),o=t(334762),a=t(20987),c=t(816771),i=t(486010),u=t(735914),l=t(255512);function s(e,n){var t=e.filter((function(e){return e.type===n}));return t.length===e.length?e:t}var f=[];function d(e){var n=e.find((function(e){return e.type===a.gX.flights}));return n&&s(n.blocks,o._.flight)||f}function p(e){var n=e.find((function(e){return e.type===a.gX.hotels}));return n&&s(n.blocks,o._.place)||f}function v(e){var n=e.find((function(e){return e.type===a.gX.rentalCars}));return n&&s(n.blocks,o._.rentalCar)||f}function m(e){var n=e.find((function(e){return e.type===a.gX.cruise}));return n&&s(n.blocks,o._.cruise)||f}function g(e){var n=e.find((function(e){return e.type===a.gX.transit}));return n&&[].concat((0,r.A)(s(n.blocks,o._.train)),(0,r.A)(s(n.blocks,o._.bus)),(0,r.A)(l.Ay.launchOtherReservations?s(n.blocks,o._.ferry):[]))||f}function h(e){return[].concat((0,r.A)(S(e).map(y)),(0,r.A)(B(e).flatMap(k)))}function k(e){switch(e.type){case o._.place:return[y(e)];case o._.story:return e.place?[e.place]:[];case o._.flight:var n,t,a=null===(n=e.depart.airport)||void 0===n?void 0:n.googlePlace,i=null===(t=e.arrive.airport)||void 0===t?void 0:t.googlePlace;return[].concat((0,r.A)(a?[(0,c.ep)(a)]:[]),(0,r.A)(i?[(0,c.ep)(i)]:[]));case o._.rentalCar:var l=e.pickUp.place,s=e.dropOff.place;return[].concat((0,r.A)(l?[(0,c.ep)(l)]:[]),(0,r.A)(s?[(0,c.ep)(s)]:[]));case o._.train:var f=e.depart.place,d=e.arrive.place;return[].concat((0,r.A)(f?[(0,c.ep)(f)]:[]),(0,r.A)(d?[(0,c.ep)(d)]:[]));case o._.bus:var p=e.depart.place,v=e.arrive.place;return[].concat((0,r.A)(p?[(0,c.ep)(p)]:[]),(0,r.A)(v?[(0,c.ep)(v)]:[]));case o._.ferry:var m=e.depart.place,g=e.arrive.place;return[].concat((0,r.A)(m?[(0,c.ep)(m)]:[]),(0,r.A)(g?[(0,c.ep)(g)]:[]));case o._.cruise:return[(0,c.ep)(e.depart.place)].concat((0,r.A)(e.portsOfCall.map((function(e){var n=e.place;return(0,c.ep)(n)}))),[(0,c.ep)(e.arrive.place)]);case o._.attachment:case o._.note:case o._.checklist:return[];default:return(0,u.t)(e),[]}}function y(e){return"place_id"in e.place?(0,c.ep)(e.place):e.place}function b(e){var n=P(e),t=_(e),o=O(e);return[].concat((0,r.A)(S(e).map((function(e){return e.place}))),(0,r.A)(o.map((function(e){return e.depart.place}))),(0,r.A)(o.map((function(e){return e.arrive.place}))),(0,r.A)(n.map((function(e){var n;return null===(n=e.depart.airport)||void 0===n?void 0:n.googlePlace}))),(0,r.A)(n.map((function(e){var n;return null===(n=e.arrive.airport)||void 0===n?void 0:n.googlePlace}))),(0,r.A)(t.map((function(e){return e.pickUp.place}))),(0,r.A)(t.map((function(e){return e.dropOff.place}))),(0,r.A)(B(e).map((function(e){return e.place})))).filter((function(e){return!!e})).map(c.LI)}function M(e){return b(e).length}function A(e){return(0,i.iF)(e.map((function(e){return e.blocks})))}function S(e){return s(A(e),o._.place)}function B(e){return s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.story)}function P(e){return s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.flight)}function _(e){return s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.rentalCar)}function O(e){return[].concat((0,r.A)(s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.bus)),(0,r.A)(s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.train)),(0,r.A)(s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.ferry)))}function w(e){return s((0,i.iF)(e.map((function(e){return e.blocks}))),o._.cruise)}function I(e,n){var t=new Set(n);return function(e){return(0,i.iF)(e.map((function(e,n){return e.blocks.map((function(e,t){return{blockIndex:t,sectionIndex:n,block:e}}))})))}(e).filter((function(e){return t.has(e.block.id)}))}},20987:function(e,n,t){var r;t.d(n,{dF:function(){return o},fy:function(){return a},gX:function(){return r},pQ:function(){return c}}),function(e){e.normal="normal",e.textOnly="textOnly",e.hotels="hotels",e.flights="flights",e.rentalCars="rentalCars",e.attachments="attachments",e.transit="transit",e.cruise="cruise",e.story="story"}(r||(r={}));var o,a=[r.textOnly,r.attachments,r.flights,r.hotels,r.rentalCars,r.transit,r.cruise,r.normal];r.story;!function(e){e.placeList="placeList",e.dayPlan="dayPlan",e.guideDayPlan="guideDayPlan"}(o||(o={}));var c=[r.hotels,r.flights,r.rentalCars,r.transit]},186342:function(e,n,t){t.d(n,{S:function(){return r}});var r=t(822227).N5/2}}]);